"use strict";(self.webpackChunkstoneDB=self.webpackChunkstoneDB||[]).push([[1860],{3905:function(e,n,t){t.d(n,{Zo:function(){return l},kt:function(){return p}});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function E(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var T=a.createContext({}),N=function(e){var n=a.useContext(T),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},l=function(e){var n=N(e.components);return a.createElement(T.Provider,{value:n},e.children)},L={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},s=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,T=e.parentName,l=E(e,["components","mdxType","originalType","parentName"]),s=N(t),p=r,c=s["".concat(T,".").concat(p)]||s[p]||L[p]||o;return t?a.createElement(c,i(i({ref:n},l),{},{components:t})):a.createElement(c,i({ref:n},l))}));function p(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=s;var E={};for(var T in n)hasOwnProperty.call(n,T)&&(E[T]=n[T]);E.originalType=e,E.mdxType="string"==typeof e?e:r,i[1]=E;for(var N=2;N<o;N++)i[N]=t[N];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}s.displayName="MDXCreateElement"},60138:function(e,n,t){t.r(n),t.d(n,{assets:function(){return l},contentTitle:function(){return T},default:function(){return p},frontMatter:function(){return E},metadata:function(){return N},toc:function(){return L}});var a=t(87462),r=t(63366),o=(t(67294),t(3905)),i=["components"],E={id:"use-outter-to-migrate",sidebar_position:8.1},T="MySQL\u589e\u91cf\u6570\u636e\u540c\u6b65\u5de5\u5177-otter",N={unversionedId:"data-migration-to-stonedb/use-outter-to-migrate",id:"data-migration-to-stonedb/use-outter-to-migrate",title:"MySQL\u589e\u91cf\u6570\u636e\u540c\u6b65\u5de5\u5177-otter",description:"otter\u9879\u76ee\u5730\u5740\uff1ahttps://github.com/alibaba/otter",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/07-data-migration-to-stonedb/use-otter-to-migrate.md",sourceDirName:"07-data-migration-to-stonedb",slug:"/data-migration-to-stonedb/use-outter-to-migrate",permalink:"/zh/docs/data-migration-to-stonedb/use-outter-to-migrate",draft:!1,editUrl:"https://github.com/stoneatom/stonedb/edit/stonedb-5.7/website/i18n/zh/docusaurus-plugin-content-docs/current/07-data-migration-to-stonedb/use-otter-to-migrate.md",tags:[],version:"current",lastUpdatedBy:"SPZhang",lastUpdatedAt:1659336509,formattedLastUpdatedAt:"2022/8/1",sidebarPosition:8.1,frontMatter:{id:"use-outter-to-migrate",sidebar_position:8.1},sidebar:"autoSidebar",previous:{title:"StoneDB\u6027\u80fd\u6d4b\u8bd5\u65b9\u6cd5\uff08OLTP\uff09",permalink:"/zh/docs/performance-tuning/performance-tests/OLTP/oltp-performance-test-method"},next:{title:"\u6570\u636e\u8fc1\u79fb\u540c\u6b65\u5de5\u5177-Gravity",permalink:"/zh/docs/data-migration-to-stonedb/use-gravity-to-migrate"}},l={},L=[{value:"otter\u4ecb\u7ecd",id:"otter\u4ecb\u7ecd",level:2},{value:"\u5de5\u4f5c\u539f\u7406",id:"\u5de5\u4f5c\u539f\u7406",level:3},{value:"\u5b89\u88c5\u90e8\u7f72",id:"\u5b89\u88c5\u90e8\u7f72",level:2},{value:"\u90e8\u7f72\u8282\u70b9\u914d\u7f6e",id:"\u90e8\u7f72\u8282\u70b9\u914d\u7f6e",level:3},{value:"\u90e8\u7f72\u524d\u51c6\u5907",id:"\u90e8\u7f72\u524d\u51c6\u5907",level:3},{value:"\u90e8\u7f72zookeeper",id:"\u90e8\u7f72zookeeper",level:3},{value:"otter\u90e8\u7f72",id:"otter\u90e8\u7f72",level:3},{value:"Manager \u90e8\u7f72",id:"manager-\u90e8\u7f72",level:4},{value:"\u914d\u7f6ezookeeper",id:"\u914d\u7f6ezookeeper",level:5},{value:"\u914d\u7f6enode",id:"\u914d\u7f6enode",level:5},{value:"\u6dfb\u52a0canal",id:"\u6dfb\u52a0canal",level:5},{value:"\u914d\u7f6e\u6570\u636e\u6e90",id:"\u914d\u7f6e\u6570\u636e\u6e90",level:5},{value:"\u914d\u7f6e\u540c\u6b65\u7ba1\u7406",id:"\u914d\u7f6e\u540c\u6b65\u7ba1\u7406",level:5},{value:"Node\u90e8\u7f72",id:"node\u90e8\u7f72",level:4},{value:"\u540c\u6b65\u4efb\u52a1\u6d4b\u8bd5",id:"\u540c\u6b65\u4efb\u52a1\u6d4b\u8bd5",level:2}],s={toc:L};function p(e){var n=e.components,E=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},s,E,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"mysql\u589e\u91cf\u6570\u636e\u540c\u6b65\u5de5\u5177-otter"},"MySQL\u589e\u91cf\u6570\u636e\u540c\u6b65\u5de5\u5177-otter"),(0,o.kt)("p",null,"otter\u9879\u76ee\u5730\u5740\uff1a",(0,o.kt)("a",{parentName:"p",href:"https://github.com/alibaba/otter"},"https://github.com/alibaba/otter"),"\notter\u4f9d\u8d56\u4e86zookeeper\u8fdb\u884c\u591a\u8282\u70b9\u8c03\u5ea6\uff0c\u6240\u4ee5\u4e5f\u9700\u8981\u5b89\u88c5\u90e8\u7f72zookeeper\nzookeeper \u9879\u76ee\u5730\u5740\uff1a",(0,o.kt)("a",{parentName:"p",href:"https://github.com/apache/zookeeper"},"https://github.com/apache/zookeeper"),"\nzookeeper\u4e0b\u8f7d\u90e8\u7f72\u6587\u4ef6\u53ef\u4ee5\u901a\u8fc7\u955c\u50cf\u7f51\u7ad9\u4e0b\u8f7d\uff1a",(0,o.kt)("a",{parentName:"p",href:"http://archive.apache.org/dist/zookeeper/"},"http://archive.apache.org/dist/zookeeper/")),(0,o.kt)("h2",{id:"otter\u4ecb\u7ecd"},"otter\u4ecb\u7ecd"),(0,o.kt)("p",null,"otter \u662f\u963f\u91cc\u5df4\u5df4\u57fa\u4e8e\u6570\u636e\u5e93\u589e\u91cf\u65e5\u5fd7\u89e3\u6790\uff0c\u4f7f\u7528\u7eafjava\u8bed\u8a00\u7f16\u5199\u7684\u51c6\u5b9e\u65f6\u540c\u6b65\u5230\u672c\u673a\u623f\u6216\u5f02\u5730\u673a\u623f\u7684mysql/oracle\u6570\u636e\u5e93. \u4e00\u4e2a\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u540c\u6b65\u7cfb\u7edf\u3002\n\u5982\u9700\u5168\u91cf+\u589e\u91cf\u6570\u636e\u8fc1\u79fb\uff0c\u8bf7\u5148\u4f7f\u7528",(0,o.kt)("a",{parentName:"p",href:"https://stoneatom.yuque.com/staff-ft8n1u/dghuxr/cdqzu8?view=doc_embed"},"MySQL\u5168\u91cf\u6570\u636e\u5907\u4efd-mydumper-OK")," \u8fc1\u79fb\u5168\u91cf\u6570\u636e\u540e\u518d\u914d\u7f6eotter\u8fdb\u884c\u589e\u91cf\u6570\u636e\u8fc1\u79fb\u3002\n\u76ee\u524d\u540c\u6b65\u89c4\u6a21\uff1a"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"\u540c\u6b65\u6570\u636e\u91cf6\u4ebf"),(0,o.kt)("li",{parentName:"ol"},"\u6587\u4ef6\u540c\u6b651.5TB(2000w\u5f20\u56fe\u7247)"),(0,o.kt)("li",{parentName:"ol"},"\u6d89\u53ca200+\u4e2a\u6570\u636e\u5e93\u5b9e\u4f8b\u4e4b\u95f4\u7684\u540c\u6b65"),(0,o.kt)("li",{parentName:"ol"},"80+\u53f0\u673a\u5668\u7684\u96c6\u7fa4\u89c4\u6a21")),(0,o.kt)("h3",{id:"\u5de5\u4f5c\u539f\u7406"},"\u5de5\u4f5c\u539f\u7406"),(0,o.kt)("p",null,(0,o.kt)("img",{src:t(58550).Z,width:"1800",height:"643"}),"\n\u622a\u56fe\u6765\u81eaotter github \u622a\u56fe\n\u539f\u7406\u63cf\u8ff0\uff1a"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"\u57fa\u4e8eCanal\u5f00\u6e90\u4ea7\u54c1\uff0c\u83b7\u53d6\u6570\u636e\u5e93\u589e\u91cf\u65e5\u5fd7\u6570\u636e\u3002 \u7531\u4e8eotter\u662f\u57fa\u4e8ecanal\u7684\u5f00\u6e90\u4ea7\u54c1\uff0c\u6240\u4ee5otter\u4e2d\u5df2\u7ecf\u96c6\u6210\u4e86canal\uff0c\u4e0d\u9700\u8981\u518d\u642d\u5efa\u65b0\u7684canal\u73af\u5883\uff0c\u5f53\u7136\uff0c\u4e5f\u652f\u6301\u72ec\u7acb\u642d\u5efa\u7684canal\u914d\u7f6e"),(0,o.kt)("li",{parentName:"ol"},"\u5178\u578b\u7ba1\u7406\u7cfb\u7edf\u67b6\u6784\uff0cmanager(web\u7ba1\u7406)+node(\u5de5\u4f5c\u8282\u70b9)\na. manager\u8fd0\u884c\u65f6\u63a8\u9001\u540c\u6b65\u914d\u7f6e\u5230node\u8282\u70b9\nb. node\u8282\u70b9\u5c06\u540c\u6b65\u72b6\u6001\u53cd\u9988\u5230manager\u4e0a "),(0,o.kt)("li",{parentName:"ol"},"\u57fa\u4e8ezookeeper\uff0c\u89e3\u51b3\u5206\u5e03\u5f0f\u72b6\u6001\u8c03\u5ea6\u7684\uff0c\u5141\u8bb8\u591anode\u8282\u70b9\u4e4b\u95f4\u534f\u540c\u5de5\u4f5c. ")),(0,o.kt)("p",null,"\u540d\u8bcd\u89e3\u91ca\uff1a\n",(0,o.kt)("strong",{parentName:"p"},"Pipeline"),"\uff1a\u4ece\u6e90\u7aef\u5230\u76ee\u6807\u7aef\u7684\u6574\u4e2a\u8fc7\u7a0b\u63cf\u8ff0\uff0c\u4e3b\u8981\u7531\u4e00\u4e9b\u540c\u6b65\u6620\u5c04\u8fc7\u7a0b\u7ec4\u6210\n",(0,o.kt)("strong",{parentName:"p"},"Channel"),"\uff1a\u540c\u6b65\u901a\u9053\uff0c\u5355\u5411\u540c\u6b65\u4e2d\u4e00\u4e2aPipeline\u7ec4\u6210\uff0c\u5728\u53cc\u5411\u540c\u6b65\u4e2d\u6709\u4e24\u4e2aPipeline\u7ec4\u6210\n",(0,o.kt)("strong",{parentName:"p"},"DataMediaPair"),"\uff1a\u6839\u636e\u4e1a\u52a1\u8868\u5b9a\u4e49\u6620\u5c04\u5173\u7cfb\uff0c\u6bd4\u5982\u6e90\u8868\u548c\u76ee\u6807\u8868\uff0c\u5b57\u6bb5\u6620\u5c04\uff0c\u5b57\u6bb5\u7ec4\u7b49\n",(0,o.kt)("strong",{parentName:"p"},"DataMedia "),": \u62bd\u8c61\u7684\u6570\u636e\u4ecb\u8d28\u6982\u5ff5\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u6570\u636e\u8868/mq\u961f\u5217\u5b9a\u4e49\n",(0,o.kt)("strong",{parentName:"p"},"DataMediaSource "),": \u62bd\u8c61\u7684\u6570\u636e\u4ecb\u8d28\u6e90\u4fe1\u606f\uff0c\u8865\u5145\u63cf\u8ff0DateMedia\n",(0,o.kt)("strong",{parentName:"p"},"ColumnPair "),": \u5b9a\u4e49\u5b57\u6bb5\u6620\u5c04\u5173\u7cfb\n",(0,o.kt)("strong",{parentName:"p"},"ColumnGroup "),": \u5b9a\u4e49\u5b57\u6bb5\u6620\u5c04\u7ec4\n",(0,o.kt)("strong",{parentName:"p"},"Node "),": \u5904\u7406\u540c\u6b65\u8fc7\u7a0b\u7684\u5de5\u4f5c\u8282\u70b9\uff0c\u5bf9\u5e94\u4e00\u4e2ajvm"),(0,o.kt)("p",null,"\u6269\u5c55\uff1a\n\u4ec0\u4e48\u662fcanal?\notter\u4e4b\u524d\u5f00\u6e90\u7684\u4e00\u4e2a\u5b50\u9879\u76ee\uff0c\u5f00\u6e90\u94fe\u63a5\u5730\u5740\uff1a",(0,o.kt)("a",{parentName:"p",href:"http://github.com/alibaba/canal"},"http://github.com/alibaba/canal")),(0,o.kt)("h2",{id:"\u5b89\u88c5\u90e8\u7f72"},"\u5b89\u88c5\u90e8\u7f72"),(0,o.kt)("h3",{id:"\u90e8\u7f72\u8282\u70b9\u914d\u7f6e"},"\u90e8\u7f72\u8282\u70b9\u914d\u7f6e"),(0,o.kt)("p",null,"StoneDB\uff1a192.168.64.10:3306\nMySQL\uff1a192.168.64.20:3306"),(0,o.kt)("p",null,"otter manager\u3001node and zookeeper : 192.168.64.30"),(0,o.kt)("h3",{id:"\u90e8\u7f72\u524d\u51c6\u5907"},"\u90e8\u7f72\u524d\u51c6\u5907"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\u6e90\u7aefMySQL"),"\uff1a\n\u6709canal \u6743\u9650\u7684\u8d26\u53f7"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE USER canal IDENTIFIED BY 'canal';  \nGRANT SELECT, REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO 'canal'@'%';\nFLUSH PRIVILEGES;\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\u76ee\u6807\u7aefMysql\u6216\u8005StoneDB"),":\n\u6709\u8bfb\u5199\u521b\u5efa\u8868\u7b49\u6743\u9650\u8d26\u53f7"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"grant all ON *.* to otter@'%' identified by 'otter123';\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Otter"),"\uff1a\notter\u5206\u4e3amanager \u548cnode\uff0c\u4f9d\u8d56\u4e86zookeeper\u8fdb\u884c\u591a\u8282\u70b9\u8c03\u5ea6\uff0c\u540c\u65f6otter\u7684\u5143\u6570\u636e\u4fe1\u606f\u5b58\u653e\u4e8emysql\uff0c\u6240\u4ee5\u6211\u4eec\u5728\u90e8\u7f72otter\u4e4b\u524d\u9700\u8981\u63d0\u524d\u90e8\u7f72\u597dzookeeper\u548cmysql\u3002\notter manager\u4f9d\u8d56\u4e8emysql\u8fdb\u884c\u914d\u7f6e\u4fe1\u606f\u7684\u5b58\u50a8\uff0c\u6240\u4ee5\u4e5f\u9700\u8981\u9884\u5148\u5b89\u88c5mysql\uff0c\u5e76\u521d\u59cb\u5316otter manager\u7684\u7cfb\u7edf\u8868\u7ed3\u6784\u3002\nmysql\u5b89\u88c5\u4e0d\u505a\u8fc7\u591a\u4ecb\u7ecd"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"#\u4e0b\u8f7d\nwget https://raw.github.com/alibaba/otter/master/manager/deployer/src/main/resources/sql/otter-manager-schema.sql \n#\u8f7d\u5165\nsource otter-manager-schema.sql\n")),(0,o.kt)("p",null,"otter-manager-schema.sql \u6587\u4ef6"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE DATABASE /*!32312 IF NOT EXISTS*/ `otter` /*!40100 DEFAULT CHARACTER SET utf8 COLLATE utf8_bin */;\n\nUSE `otter`;\n\nSET sql_mode='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';\n\nCREATE TABLE `ALARM_RULE` (\n  `ID` bigint(20) unsigned NOT NULL AUTO_INCREMENT,\n  `MONITOR_NAME` varchar(1024) DEFAULT NULL,\n  `RECEIVER_KEY` varchar(1024) DEFAULT NULL,\n  `STATUS` varchar(32) DEFAULT NULL,\n  `PIPELINE_ID` bigint(20) NOT NULL,\n  `DESCRIPTION` varchar(256) DEFAULT NULL,\n  `GMT_CREATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_MODIFIED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  `MATCH_VALUE` varchar(1024) DEFAULT NULL,\n  `PARAMETERS` text DEFAULT NULL,\n  PRIMARY KEY (`ID`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `AUTOKEEPER_CLUSTER` (\n  `ID` bigint(20) NOT NULL AUTO_INCREMENT,\n  `CLUSTER_NAME` varchar(200) NOT NULL,\n  `SERVER_LIST` varchar(1024) NOT NULL,\n  `DESCRIPTION` varchar(200) DEFAULT NULL,\n  `GMT_CREATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_MODIFIED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`ID`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `CANAL` (\n  `ID` bigint(20) unsigned NOT NULL AUTO_INCREMENT,\n  `NAME` varchar(200) DEFAULT NULL,\n  `DESCRIPTION` varchar(200) DEFAULT NULL,\n  `PARAMETERS` text DEFAULT NULL,\n  `GMT_CREATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_MODIFIED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`ID`),\n  UNIQUE KEY `CANALUNIQUE` (`NAME`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `CHANNEL` (\n  `ID` bigint(20) NOT NULL AUTO_INCREMENT,\n  `NAME` varchar(200) NOT NULL,\n  `DESCRIPTION` varchar(200) DEFAULT NULL,\n  `PARAMETERS` text DEFAULT NULL,\n  `GMT_CREATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_MODIFIED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`ID`),\n  UNIQUE KEY `CHANNELUNIQUE` (`NAME`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `COLUMN_PAIR` (\n  `ID` bigint(20) NOT NULL AUTO_INCREMENT,\n  `SOURCE_COLUMN` varchar(200) DEFAULT NULL,\n  `TARGET_COLUMN` varchar(200) DEFAULT NULL,\n  `DATA_MEDIA_PAIR_ID` bigint(20) NOT NULL,\n  `GMT_CREATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_MODIFIED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`ID`),\n  KEY `idx_DATA_MEDIA_PAIR_ID` (`DATA_MEDIA_PAIR_ID`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `COLUMN_PAIR_GROUP` (\n  `ID` bigint(20) NOT NULL AUTO_INCREMENT,\n  `DATA_MEDIA_PAIR_ID` bigint(20) NOT NULL,\n  `COLUMN_PAIR_CONTENT` text DEFAULT NULL,\n  `GMT_CREATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_MODIFIED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`ID`),\n  KEY `idx_DATA_MEDIA_PAIR_ID` (`DATA_MEDIA_PAIR_ID`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `DATA_MEDIA` (\n  `ID` bigint(20) NOT NULL AUTO_INCREMENT,\n  `NAME` varchar(200) NOT NULL,\n  `NAMESPACE` varchar(200) NOT NULL,\n  `PROPERTIES` varchar(1000) NOT NULL,\n  `DATA_MEDIA_SOURCE_ID` bigint(20) NOT NULL,\n  `GMT_CREATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_MODIFIED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`ID`),\n  UNIQUE KEY `DATAMEDIAUNIQUE` (`NAME`,`NAMESPACE`,`DATA_MEDIA_SOURCE_ID`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `DATA_MEDIA_PAIR` (\n  `ID` bigint(20) NOT NULL AUTO_INCREMENT,\n  `PULLWEIGHT` bigint(20) DEFAULT NULL,\n  `PUSHWEIGHT` bigint(20) DEFAULT NULL,\n  `RESOLVER` text DEFAULT NULL,\n  `FILTER` text DEFAULT NULL,\n  `SOURCE_DATA_MEDIA_ID` bigint(20) DEFAULT NULL,\n  `TARGET_DATA_MEDIA_ID` bigint(20) DEFAULT NULL,\n  `PIPELINE_ID` bigint(20) NOT NULL,\n  `COLUMN_PAIR_MODE` varchar(20) DEFAULT NULL,\n  `GMT_CREATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_MODIFIED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`ID`),\n  KEY `idx_PipelineID` (`PIPELINE_ID`,`ID`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `DATA_MEDIA_SOURCE` (\n  `ID` bigint(20) NOT NULL AUTO_INCREMENT,\n  `NAME` varchar(200) NOT NULL,\n  `TYPE` varchar(20) NOT NULL,\n  `PROPERTIES` varchar(1000) NOT NULL,\n  `GMT_CREATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_MODIFIED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`ID`),\n  UNIQUE KEY `DATAMEDIASOURCEUNIQUE` (`NAME`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `DELAY_STAT` (\n  `ID` bigint(20) NOT NULL AUTO_INCREMENT,\n  `DELAY_TIME` bigint(20) NOT NULL,\n  `DELAY_NUMBER` bigint(20) NOT NULL,\n  `PIPELINE_ID` bigint(20) NOT NULL,\n  `GMT_CREATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_MODIFIED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`ID`),\n  KEY `idx_PipelineID_GmtModified_ID` (`PIPELINE_ID`,`GMT_MODIFIED`,`ID`),\n  KEY `idx_Pipeline_GmtCreate` (`PIPELINE_ID`,`GMT_CREATE`),\n  KEY `idx_GmtCreate_id` (`GMT_CREATE`,`ID`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `LOG_RECORD` (\n  `ID` bigint(20) NOT NULL AUTO_INCREMENT,\n  `NID` varchar(200) DEFAULT NULL,\n  `CHANNEL_ID` varchar(200) NOT NULL,\n  `PIPELINE_ID` varchar(200) NOT NULL,\n  `TITLE` varchar(1000) DEFAULT NULL,\n  `MESSAGE` text DEFAULT NULL,\n  `GMT_CREATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_MODIFIED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`ID`),\n  KEY `logRecord_pipelineId` (`PIPELINE_ID`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `NODE` (\n  `ID` bigint(20) NOT NULL AUTO_INCREMENT,\n  `NAME` varchar(200) NOT NULL,\n  `IP` varchar(200) NOT NULL,\n  `PORT` bigint(20) NOT NULL,\n  `DESCRIPTION` varchar(200) DEFAULT NULL,\n  `PARAMETERS` text DEFAULT NULL,\n  `GMT_CREATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_MODIFIED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`ID`),\n  UNIQUE KEY `NODEUNIQUE` (`NAME`,`IP`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `PIPELINE` (\n  `ID` bigint(20) NOT NULL AUTO_INCREMENT,\n  `NAME` varchar(200) NOT NULL,\n  `DESCRIPTION` varchar(200) DEFAULT NULL,\n  `PARAMETERS` text DEFAULT NULL,\n  `CHANNEL_ID` bigint(20) NOT NULL,\n  `GMT_CREATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_MODIFIED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`ID`),\n  UNIQUE KEY `PIPELINEUNIQUE` (`NAME`,`CHANNEL_ID`),\n  KEY `idx_ChannelID` (`CHANNEL_ID`,`ID`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `PIPELINE_NODE_RELATION` (\n  `ID` bigint(20) NOT NULL AUTO_INCREMENT,\n  `NODE_ID` bigint(20) NOT NULL,\n  `PIPELINE_ID` bigint(20) NOT NULL,\n  `LOCATION` varchar(20) NOT NULL,\n  `GMT_CREATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_MODIFIED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`ID`),\n  KEY `idx_PipelineID` (`PIPELINE_ID`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `SYSTEM_PARAMETER` (\n  `ID` bigint(20) unsigned NOT NULL,\n  `VALUE` text DEFAULT NULL,\n  `GMT_CREATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_MODIFIED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`ID`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nCREATE TABLE `TABLE_HISTORY_STAT` (\n  `ID` bigint(20) unsigned NOT NULL AUTO_INCREMENT,\n  `FILE_SIZE` bigint(20) DEFAULT NULL,\n  `FILE_COUNT` bigint(20) DEFAULT NULL,\n  `INSERT_COUNT` bigint(20) DEFAULT NULL,\n  `UPDATE_COUNT` bigint(20) DEFAULT NULL,\n  `DELETE_COUNT` bigint(20) DEFAULT NULL,\n  `DATA_MEDIA_PAIR_ID` bigint(20) DEFAULT NULL,\n  `PIPELINE_ID` bigint(20) DEFAULT NULL,\n  `START_TIME` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `END_TIME` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_CREATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_MODIFIED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`ID`),\n  KEY `idx_DATA_MEDIA_PAIR_ID_END_TIME` (`DATA_MEDIA_PAIR_ID`,`END_TIME`),\n  KEY `idx_GmtCreate_id` (`GMT_CREATE`,`ID`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `TABLE_STAT` (\n  `ID` bigint(20) NOT NULL AUTO_INCREMENT,\n  `FILE_SIZE` bigint(20) NOT NULL,\n  `FILE_COUNT` bigint(20) NOT NULL,\n  `INSERT_COUNT` bigint(20) NOT NULL,\n  `UPDATE_COUNT` bigint(20) NOT NULL,\n  `DELETE_COUNT` bigint(20) NOT NULL,\n  `DATA_MEDIA_PAIR_ID` bigint(20) NOT NULL,\n  `PIPELINE_ID` bigint(20) NOT NULL,\n  `GMT_CREATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_MODIFIED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`ID`),\n  KEY `idx_PipelineID_DataMediaPairID` (`PIPELINE_ID`,`DATA_MEDIA_PAIR_ID`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `THROUGHPUT_STAT` (\n  `ID` bigint(20) NOT NULL AUTO_INCREMENT,\n  `TYPE` varchar(20) NOT NULL,\n  `NUMBER` bigint(20) NOT NULL,\n  `SIZE` bigint(20) NOT NULL,\n  `PIPELINE_ID` bigint(20) NOT NULL,\n  `START_TIME` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `END_TIME` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_CREATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_MODIFIED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`ID`),\n  KEY `idx_PipelineID_Type_GmtCreate_ID` (`PIPELINE_ID`,`TYPE`,`GMT_CREATE`,`ID`),\n  KEY `idx_PipelineID_Type_EndTime_ID` (`PIPELINE_ID`,`TYPE`,`END_TIME`,`ID`),\n  KEY `idx_GmtCreate_id` (`GMT_CREATE`,`ID`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `USER` (\n  `ID` bigint(20) NOT NULL AUTO_INCREMENT,\n  `USERNAME` varchar(20) NOT NULL,\n  `PASSWORD` varchar(20) NOT NULL,\n  `AUTHORIZETYPE` varchar(20) NOT NULL,\n  `DEPARTMENT` varchar(20) NOT NULL,\n  `REALNAME` varchar(20) NOT NULL,\n  `GMT_CREATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_MODIFIED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`ID`),\n  UNIQUE KEY `USERUNIQUE` (`USERNAME`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\nCREATE TABLE  `DATA_MATRIX` (\n  `ID` bigint(20) NOT NULL AUTO_INCREMENT,\n  `GROUP_KEY` varchar(200) DEFAULT NULL,\n  `MASTER` varchar(200) DEFAULT NULL,\n  `SLAVE` varchar(200) DEFAULT NULL,\n  `DESCRIPTION` varchar(200) DEFAULT NULL,\n  `GMT_CREATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  `GMT_MODIFIED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`ID`),\n  KEY `GROUPKEY` (`GROUP_KEY`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\nCREATE TABLE IF NOT EXISTS `meta_history` (\n  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT '\u4e3b\u952e',\n  `gmt_create` datetime NOT NULL COMMENT '\u521b\u5efa\u65f6\u95f4',\n  `gmt_modified` datetime NOT NULL COMMENT '\u4fee\u6539\u65f6\u95f4',\n  `destination` varchar(128) DEFAULT NULL COMMENT '\u901a\u9053\u540d\u79f0',\n  `binlog_file` varchar(64) DEFAULT NULL COMMENT 'binlog\u6587\u4ef6\u540d',\n  `binlog_offest` bigint(20) DEFAULT NULL COMMENT 'binlog\u504f\u79fb\u91cf',\n  `binlog_master_id` varchar(64) DEFAULT NULL COMMENT 'binlog\u8282\u70b9id',\n  `binlog_timestamp` bigint(20) DEFAULT NULL COMMENT 'binlog\u5e94\u7528\u7684\u65f6\u95f4\u6233',\n  `use_schema` varchar(1024) DEFAULT NULL COMMENT '\u6267\u884csql\u65f6\u5bf9\u5e94\u7684schema',\n  `sql_schema` varchar(1024) DEFAULT NULL COMMENT '\u5bf9\u5e94\u7684schema',\n  `sql_table` varchar(1024) DEFAULT NULL COMMENT '\u5bf9\u5e94\u7684table',\n  `sql_text` longtext DEFAULT NULL COMMENT '\u6267\u884c\u7684sql',\n  `sql_type` varchar(256) DEFAULT NULL COMMENT 'sql\u7c7b\u578b',\n  `extra` text DEFAULT NULL COMMENT '\u989d\u5916\u7684\u6269\u5c55\u4fe1\u606f',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY binlog_file_offest(`destination`,`binlog_master_id`,`binlog_file`,`binlog_offest`),\n  KEY `destination` (`destination`),\n  KEY `destination_timestamp` (`destination`,`binlog_timestamp`),\n  KEY `gmt_modified` (`gmt_modified`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT='\u8868\u7ed3\u6784\u53d8\u5316\u660e\u7ec6\u8868';\n\nCREATE TABLE IF NOT EXISTS `meta_snapshot` (\n  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT '\u4e3b\u952e',\n  `gmt_create` datetime NOT NULL COMMENT '\u521b\u5efa\u65f6\u95f4',\n  `gmt_modified` datetime NOT NULL COMMENT '\u4fee\u6539\u65f6\u95f4',\n  `destination` varchar(128) DEFAULT NULL COMMENT '\u901a\u9053\u540d\u79f0',\n  `binlog_file` varchar(64) DEFAULT NULL COMMENT 'binlog\u6587\u4ef6\u540d',\n  `binlog_offest` bigint(20) DEFAULT NULL COMMENT 'binlog\u504f\u79fb\u91cf',\n  `binlog_master_id` varchar(64) DEFAULT NULL COMMENT 'binlog\u8282\u70b9id',\n  `binlog_timestamp` bigint(20) DEFAULT NULL COMMENT 'binlog\u5e94\u7528\u7684\u65f6\u95f4\u6233',\n  `data` longtext DEFAULT NULL COMMENT '\u8868\u7ed3\u6784\u6570\u636e',\n  `extra` text DEFAULT NULL COMMENT '\u989d\u5916\u7684\u6269\u5c55\u4fe1\u606f',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY binlog_file_offest(`destination`,`binlog_master_id`,`binlog_file`,`binlog_offest`),\n  KEY `destination` (`destination`),\n  KEY `destination_timestamp` (`destination`,`binlog_timestamp`),\n  KEY `gmt_modified` (`gmt_modified`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT='\u8868\u7ed3\u6784\u8bb0\u5f55\u8868\u5feb\u7167\u8868';\n\n\ninsert into USER(ID,USERNAME,PASSWORD,AUTHORIZETYPE,DEPARTMENT,REALNAME,GMT_CREATE,GMT_MODIFIED) values(null,'admin','801fc357a5a74743894a','ADMIN','admin','admin',now(),now());\ninsert into USER(ID,USERNAME,PASSWORD,AUTHORIZETYPE,DEPARTMENT,REALNAME,GMT_CREATE,GMT_MODIFIED) values(null,'guest','471e02a154a2121dc577','OPERATOR','guest','guest',now(),now());\n")),(0,o.kt)("p",null,"\u53e6\u5916otter\u91c7\u7528\u7eafjava\u5f00\u53d1\uff0c\u6240\u4ee5\u4e5f\u9700\u8981\u5b89\u88c5jdk\uff0c\u8fc7\u7a0b\u4e0d\u505a\u8be6\u7ec6\u63cf\u8ff0\uff0c\u53ef\u81ea\u884c\u767e\u5ea6\notter\u90e8\u7f72\u9700\u8981\u7684\u7ec4\u4ef6\u603b\u7ed3\u6765\u8bf4\u9700\u8981manager\uff0cnode\uff0cmanager\u4f7f\u7528\u7684\u5355\u72ecmysql\uff0cjdk\uff0czookeeper"),(0,o.kt)("h3",{id:"\u90e8\u7f72zookeeper"},"\u90e8\u7f72zookeeper"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"# \u4e0b\u8f7d\n[root@otter home]# wget http://archive.apache.org/dist/zookeeper/zookeeper-3.4.14/zookeeper-3.4.14.tar.gz\n# \u89e3\u538b\n[root@otter home]# tar -zxvf zookeeper-release-3.4.14-rc2.tar.gz -C /usr/local/\n# \u66ff\u6362\u5305\u540d\n[root@otter home]# mv /usr/local/zookeeper-release-3.4.14-rc2/ /usr/local/zookeeper/\n# \u4fee\u6539\u914d\u7f6e\n[root@otter home]# cd /usr/local/zookeeper/conf\n[root@otter conf]# mkdir /usr/local/zookeeper/data #\u521b\u5efa\u5b58\u653e\u6570\u636e\u7684\u76ee\u5f55\n[root@otter conf]# cp zoo_sample.cfg zoo.cfg\n[root@otter conf]# vim zoo.cfg\ndataDir=/usr/local/zookeeper/data (\u4fee\u6539dataDir\u4e3a\u521a\u624d\u521b\u5efa\u7684\u8def\u5f84)\n\n# \u542f\u52a8\n[root@otter conf]# cd /usr/local/zookeeper/bin/\n[root@otter bin]# ./zkServer.sh start\nZooKeeper JMX enabled by default\nUsing config: /usr/local/zookeeper/bin/../conf/zoo.cfg\nStarting zookeeper ... STARTED\n\n# \u67e5\u770b\u542f\u52a8\u65f6\u751f\u6210\u7684zookeeper.out\uff0c\u4ee5\u4e0b\u662f\u6b63\u5e38\u542f\u52a8\uff0c\u5982\u6709\u5f02\u5e38\u4fe1\u606f\u8bf7\u9488\u5bf9\u767e\u5ea6google\n[root@otter bin]# more zookeeper.out\n2022-03-23 14:50:36,056 [myid:] - INFO  [main:QuorumPeerConfig@136] - Reading configuration from: /usr/local/zookeeper/bin/../conf/zoo.cfg\n2022-03-23 14:50:36,068 [myid:] - INFO  [main:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3\n2022-03-23 14:50:36,068 [myid:] - INFO  [main:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0\n2022-03-23 14:50:36,068 [myid:] - INFO  [main:DatadirCleanupManager@101] - Purge task is not scheduled.\n2022-03-23 14:50:36,068 [myid:] - WARN  [main:QuorumPeerMain@116] - Either no config or no quorum defined in config, running  in standalone mode\n2022-03-23 14:50:36,074 [myid:] - INFO  [main:QuorumPeerConfig@136] - Reading configuration from: /usr/local/zookeeper/bin/../conf/zoo.cfg\n2022-03-23 14:50:36,074 [myid:] - INFO  [main:ZooKeeperServerMain@98] - Starting server\n2022-03-23 14:50:36,084 [myid:] - INFO  [main:Environment@100] - Server environment:zookeeper.version=3.4.14-4c25d480e66aadd371de8bd2fd8da255ac140bcf, bu\nilt on 03/06/2019 16:18 GMT\n2022-03-23 14:50:36,084 [myid:] - INFO  [main:Environment@100] - Server environment:host.name=localhost\n2022-03-23 14:50:36,085 [myid:] - INFO  [main:Environment@100] - Server environment:java.version=1.8.0_131\n2022-03-23 14:50:36,085 [myid:] - INFO  [main:Environment@100] - Server environment:java.vendor=Oracle Corporation\n2022-03-23 14:50:36,085 [myid:] - INFO  [main:Environment@100] - Server environment:java.home=/usr/java/jdk1.8.0_131/jre\n")),(0,o.kt)("h3",{id:"otter\u90e8\u7f72"},"otter\u90e8\u7f72"),(0,o.kt)("p",null,"\u4e0b\u8f7dmanager \u548cnode"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"[root@otter home]# wget https://github.com/alibaba/otter/releases/download/otter-4.2.18/manager.deployer-4.2.18.tar.gz\n\n[root@otter home]# wget https://github.com/alibaba/otter/releases/download/otter-4.2.18/node.deployer-4.2.18.tar.gz\n")),(0,o.kt)("h4",{id:"manager-\u90e8\u7f72"},"Manager \u90e8\u7f72"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"\u89e3\u538bmanager\n[root@otter home]# mkdir -p /usr/local/otter/manager\n[root@otter home]# tar -zxvf manager.deployer-4.2.18.tar.gz -C /usr/local/otter/manager/\n[root@otter home]# cd /usr/local/otter/manager/conf/\n[root@otter conf]# ll\ntotal 20\n-rwsrwsrwt. 1 root root 4209 Oct 29  2018 jetty.xml\n-rwsrwsrwt. 1 root root 7019 Oct 29  2018 logback.xml\n-rwsrwsrwt. 1 root root 1424 Oct 29  2018 otter.properties\n[root@otter conf]# vim otter.properties\uff08\u4fee\u6539\u5982\u4e0b\u914d\u7f6e\uff09\notter.domainName = 192.168.64.30 (\u672c\u673aip\u5730\u5740)   \notter.database.driver.class.name = com.mysql.jdbc.Driver\notter.database.driver.url = jdbc:mysql://127.0.0.1:3306/otter\notter.database.driver.username = root\notter.database.driver.password = mysql123\notter.zookeeper.cluster.default = 127.0.0.1:2181\n\n[root@otter conf]# cd /usr/local/otter/manager/bin\n[root@otter bin]# ./startup.sh #\u5982\u679c\u65e0\u6cd5\u542f\u52a8\u6216\u8005\u542f\u52a8\u5f02\u5e38\uff0c\u53ef\u4ee5\u67e5\u770bmanager \u6587\u4ef6\u5939\u4e0b\u7684logs/manager.log\n[root@otter manager]# tail -100 logs/manager.log\n")),(0,o.kt)("p",null,"\u542f\u52a8\u6210\u540e",(0,o.kt)("a",{parentName:"p",href:"http://192.168.64.30:8080/"},"http://192.168.64.30:8080"),"\n\u9996\u6b21\u8fdb\u53bb\u662f\u8bbf\u5ba2\u6a21\u5f0f\uff0c\u53ea\u6709\u53ea\u8bfb\u6743\u9650\uff0c\u9700\u8981\u53f3\u4e0a\u89d2\u9000\u51fa\u540e\u91cd\u65b0\u4ee5\u7ba1\u7406\u5458\u8eab\u4efd\u8fdb\u5165\u624d\u53ef\u4ee5\u914d\u7f6e\uff0c\u9ed8\u8ba4\u7ba1\u7406\u5458\u8d26\u53f7admin \u5bc6\u7801\uff1aadmin"),(0,o.kt)("h5",{id:"\u914d\u7f6ezookeeper"},"\u914d\u7f6ezookeeper"),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2022/png/26909006/1648089462691-9ddbac38-7fba-4b69-844d-b7d0bfb40163.png#clientId=u4e9c2c71-b6a7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=783&id=uc40e9801&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1174&originWidth=2240&originalType=binary&ratio=1&rotation=0&showTitle=false&size=166547&status=done&style=none&taskId=u0e540290-4da4-45fb-a8f9-43ea553738c&title=&width=1493.3333333333333",alt:"image.png"})),(0,o.kt)("h5",{id:"\u914d\u7f6enode"},"\u914d\u7f6enode"),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2022/png/26909006/1648089547844-aa02ba0d-edba-4144-92a9-9b6ba58b231b.png#clientId=u4e9c2c71-b6a7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=783&id=uc1abf82e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1174&originWidth=2240&originalType=binary&ratio=1&rotation=0&showTitle=false&size=176709&status=done&style=none&taskId=u6e96261c-388f-474c-b86b-d022bd8b11d&title=&width=1493.3333333333333",alt:"image.png"}),"\n",(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2022/png/26909006/1648089583004-42787d6d-a4b4-43f1-8293-1812b39aa763.png#clientId=u4e9c2c71-b6a7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=783&id=u97731f66&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1174&originWidth=2240&originalType=binary&ratio=1&rotation=0&showTitle=false&size=181079&status=done&style=none&taskId=ufadc7517-621f-4550-94cf-830b3b4140a&title=&width=1493.3333333333333",alt:"image.png"}),"\n\u914d\u7f6e\u5b8c\u540e\u6211\u4eec\u53ef\u4ee5\u770b\u5230node\u662f\u672a\u542f\u52a8\u72b6\u6001\u7684\uff0c\u9700\u8981\u90e8\u7f72\u5b8cnode\u540e\u624d\u4f1a\u663e\u793a\u542f\u52a8\uff0c\u8fd9\u91cc\u8981\u8bb0\u4f4fnode\u7684\u5e8f\u5217\u53f7\uff0c\u7b49\u4e0b\u4e0b\u9762node\u90e8\u7f72\u7684\u65f6\u5019\u9700\u8981\u914d\u7f6e\u5e8f\u5217\u53f7\u5230node/conf/nid\u6587\u4ef6\u4e2d\u2014",(0,o.kt)("a",{parentName:"p",href:"#wswke"},"Node\u90e8\u7f72"),"\n\u4e0a\u9762\u90fd\u914d\u7f6e\u5b8c\uff0c\u5e76\u542f\u52a8\u5b8cnode\u540e\uff0c\u5c31\u53ef\u4ee5\u7ee7\u7eed\u540e\u9762\u7684\u4efb\u52a1\u914d\u7f6e\u4e86"),(0,o.kt)("h5",{id:"\u6dfb\u52a0canal"},"\u6dfb\u52a0canal"),(0,o.kt)("p",null,"\uff08\u5efa\u8bae\u5148\u4e86\u89e3\u4e0b\u5355\u72ec\u642d\u5efa\u7684canal\u914d\u7f6e\u548c\u539f\u7406\uff09\n",(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2022/png/26909006/1655192130333-2deadaaa-8798-4763-a583-c7d4db94cc60.png#clientId=u1beec70a-5d51-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=1174&id=ube41dd96&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1174&originWidth=2240&originalType=binary&ratio=1&rotation=0&showTitle=false&size=214350&status=done&style=none&taskId=udcd08701-cd96-468e-a0b1-fccd6068a9f&title=&width=2240",alt:"image.png"}),"\ncanal\u53ef\u4ee5\u4f7f\u7528\u5185\u5d4c\u548c\u72ec\u7acb\u670d\u52a1\u5f62\u5f0f\u4e24\u79cd\u9009\u62e9\uff0c\u5982\u679c\u662f\u8981\u5b9e\u73b0\u5168\u91cf+\u589e\u91cf\u540c\u6b65\u7684\u8bdd\uff0c\u9700\u8981\u4ece\u5168\u91cf\u5907\u4efd\u6587\u4ef6\u4e2d\u627e\u5230\u4e00 \u81f4\u6027\u5907\u4efd\u7684binlog\u6587\u4ef6\u548cpos\u70b9,\u6216\u8005\u53ef\u4ee5\u5728\u6e90\u7aefmysql\u5185\u6267\u884cshow master status\u83b7\u53d6\uff0c\u542f\u7528\u4f4d\u70b9\u540c\u6b65\npos\u70b9\u8bbe\u7f6e\u53c2\u8003\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'{"journalName":"mysql-bin.000002","position":5404,"timestamp":0};\n')),(0,o.kt)("h5",{id:"\u914d\u7f6e\u6570\u636e\u6e90"},"\u914d\u7f6e\u6570\u636e\u6e90"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\u6e90\u7aef\u6570\u636e\u6e90\uff08\u914d\u7f6e\u5b8c\u53ef\u4ee5\u70b9\u51fb\u4e0b\u9a8c\u8bc1\u94fe\u63a5\u6570\u636e\u6e90\u770b\u914d\u7f6e\u662f\u5426\u6b63\u786e,\u5982\u679c\u8fde\u901a\u6027\u65e0\u6cd5\u6d4b\u8bd5\u901a\u8fc7\uff0c\u8bf7\u67e5\u770blogs/manager.log\uff09"),"\n",(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2022/png/26909006/1648093161055-87e8437b-085b-4372-9206-000bd1d6d874.png#clientId=u4e9c2c71-b6a7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=783&id=u9ebfc4a2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1174&originWidth=2240&originalType=binary&ratio=1&rotation=0&showTitle=false&size=203724&status=done&style=none&taskId=u5298f21f-f1f4-401a-bf30-d136291f5e5&title=&width=1493.3333333333333",alt:"image.png"}),"\n",(0,o.kt)("strong",{parentName:"p"},"\u76ee\u6807\u7aef\u6570\u636e\u6e90\u914d\u7f6e"),"\n",(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2022/png/26909006/1655194402096-3b87b35a-4061-444c-bca1-ab97f798e06b.png#clientId=u802aa721-067d-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=783&id=u26030968&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1174&originWidth=2240&originalType=binary&ratio=1&rotation=0&showTitle=false&size=190951&status=done&style=none&taskId=ud10600e3-df51-4e5f-b2b8-7eed9e8bd39&title=&width=1493.3333333333333",alt:"image.png"}),"\n\u914d\u7f6e\u6570\u636e\u8868\u7528\u4e8e\u540c\u6b65\u6570\u636e\uff08\u540c\u6837\u9700\u8981\u914d\u7f6e\u6e90\u7aef\u548c\u76ee\u6807\u7aef\u5e93\u540d\u548c\u8868\u540d\uff09\n",(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2022/png/26909006/1648100991171-a629aa8c-0f38-4bb0-b8e7-6a7063400735.png#clientId=u4e9c2c71-b6a7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=783&id=ubd1a9d4d&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1174&originWidth=2240&originalType=binary&ratio=1&rotation=0&showTitle=false&size=191610&status=done&style=none&taskId=ue8b7ad27-fc83-4d6c-af6a-c54b99c4bfc&title=&width=1493.3333333333333",alt:"image.png"})),(0,o.kt)("h5",{id:"\u914d\u7f6e\u540c\u6b65\u7ba1\u7406"},"\u914d\u7f6e\u540c\u6b65\u7ba1\u7406"),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2022/png/26909006/1655192782621-ff9d9e61-4609-4acb-b628-f05e4c5322df.png#clientId=u1beec70a-5d51-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=1174&id=uee9dd202&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1174&originWidth=2240&originalType=binary&ratio=1&rotation=0&showTitle=false&size=169257&status=done&style=none&taskId=u9dcda531-58df-4858-8cb1-269c529ac8f&title=&width=2240",alt:"image.png"}),"\n\u6dfb\u52a0pipeLine"),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2022/png/26909006/1655192803373-42873072-ab2c-4bc6-814f-3ac21e853317.png#clientId=u1beec70a-5d51-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=1174&id=uac004ccb&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1174&originWidth=2240&originalType=binary&ratio=1&rotation=0&showTitle=false&size=183388&status=done&style=none&taskId=ub67025ca-7e58-47a8-930a-ea35209b810&title=&width=2240",alt:"image.png"}),"\n\u70b9\u51fbchannel\u540d\u5b57\u8fdb\u5165pipeline\u914d\u7f6e\u754c\u9762",(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2022/png/26909006/1655193543674-e5533c1b-2a3a-4064-aa1c-36bf0b589bce.png#clientId=u1beec70a-5d51-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=1174&id=u98951f81&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1174&originWidth=2240&originalType=binary&ratio=1&rotation=0&showTitle=false&size=194720&status=done&style=none&taskId=u8439058a-28e0-4086-8bec-242d62f25a3&title=&width=2240",alt:"image.png"}),"\n\u9009\u62e9\u914d\u7f6e\u7684node\u8282\u70b9\uff0c\u8fd8\u6709canal\n\u6dfb\u52a0\u8868\u6620\u5c04\u5173\u7cfb\n\u70b9\u51fbpipeline\u540d\u79f0\u8fdb\u5165\u6dfb\u52a0\u8868\u6620\u5c04\u5173\u7cfb\u754c\u9762\n",(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2022/png/26909006/1655193576764-8e21fb66-d01a-4a22-b61b-4196e992a3b4.png#clientId=u1beec70a-5d51-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=1174&id=u07590142&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1174&originWidth=2240&originalType=binary&ratio=1&rotation=0&showTitle=false&size=179917&status=done&style=none&taskId=ud41d1b4a-e7f8-460b-a5f6-12383d34035&title=&width=2240",alt:"image.png"}),"\n",(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2022/png/26909006/1648104282720-86ea244c-73d1-45f2-a6eb-26a1cd63c1f9.png#clientId=u4e9c2c71-b6a7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=245&id=u9cbf390a&margin=%5Bobject%20Object%5D&name=image.png&originHeight=368&originWidth=2216&originalType=binary&ratio=1&rotation=0&showTitle=false&size=91725&status=done&style=none&taskId=ud38da5b3-1689-49a9-aa12-8c30b5a9213&title=&width=1477.3333333333333",alt:"image.png"}),"\n\u70b9\u51fb\u6dfb\u52a0\uff0c\u6839\u636e\u6e90\u7aef\u548c\u76ee\u6807\u7aef\u533a\u522b\u5206\u522b\u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u7684\u8868\u4fe1\u606f\n",(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2022/png/26909006/1648104336059-0e0921b8-b99b-4378-aa16-8737fdd48a1d.png#clientId=u4e9c2c71-b6a7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=783&id=u5586a788&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1174&originWidth=2240&originalType=binary&ratio=1&rotation=0&showTitle=false&size=175311&status=done&style=none&taskId=u2b84e43a-9dbd-4d63-bd48-b8d9bdffce7&title=&width=1493.3333333333333",alt:"image.png"}),"\n\u4e0b\u4e00\u6b65\u9009\u62e9\u8868\u5b57\u6bb5\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u5982\u679c\u5e73\u6ed1\u8fc1\u79fb\u53ef\u4ee5\u76f4\u63a5\u4e0b\u4e00\u6b65\u4fdd\u5b58\uff0c\u7136\u540e\u56de\u5230channel\u754c\u9762\u70b9\u51fb\u542f\u52a8\u540e\u72b6\u6001\u4e3a\u8fd0\u884c\u72b6\u6001\u5373\u53ef\n",(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2022/png/26909006/1655193831976-35fb0f94-a465-4807-bc72-529081aad6c7.png#clientId=u1beec70a-5d51-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=783&id=u5581d2e6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1174&originWidth=2240&originalType=binary&ratio=1&rotation=0&showTitle=false&size=181305&status=done&style=none&taskId=ue2246df2-f8c2-46fc-b0f6-aaec961700a&title=&width=1493.3333333333333",alt:"image.png"})),(0,o.kt)("h4",{id:"node\u90e8\u7f72"},"Node\u90e8\u7f72"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"# \u89e3\u538b\n[root@otter ~]# mkdir -p /usr/local/otter/node/\n[root@otter ~]# tar -zxvf /home/node.deployer-4.2.18.tar.gz -C /usr/local/otter/node/\n\n\u914d\u7f6enode\n[root@otter node]# cd /usr/local/otter/node/conf/\n[root@otter conf]# ll\ntotal 12\n-rwsrwsrwt. 1 root root 8091 Oct 29  2018 logback.xml\n-rwsrwsrwt. 1 root root  546 Oct 29  2018 otter.properties  # \u9ed8\u8ba4\u4e0d\u9700\u8981\u4fee\u6539\uff0c\u4e0d\u8fc7\u9700\u8981\u6ce8\u610fotter.manager.address\u7684\u5730\u5740\u7aef\u53e3\u914d\u7f6e\n#\u901a\u8fc7\u4e0a\u9762manager \u914d\u7f6enode\u7684\u65f6\u5019\u83b7\u53d6\u5230node\u5e8f\u5217\u53f7\uff0c\u4e0a\u9762\u83b7\u53d6\u7684\u662f1\uff0c\u6240\u4ee5\u628a1\u5199\u5165nid\u6587\u4ef6\n[root@otter conf]# echo 1 > nid\n\n[root@otter conf]# cd /usr/local/otter/node/\n[root@otter node]# ls\nbin  conf  download  extend  htdocs  lib  logs\n[root@localhost node]# bin/startup.sh\n[root@localhost node]# tail -100 logs/node/node.log\nJava HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=128m; support was removed in 8.0\n2022-03-24 10:51:13.555 [main] INFO  com.alibaba.otter.node.deployer.OtterLauncher - INFO ## the otter server is running now ......\nping \n")),(0,o.kt)("p",null,"\u542f\u52a8\u6210\u529f\u540e\u53ef\u4ee5\u770b\u5230\u4e0a\u9762\u7684manager \u7684node\u7ba1\u7406\u754c\u9762\u7684node\u4e3a\u542f\u52a8\u72b6\u6001\n",(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2022/png/26909006/1648090666995-b823610a-5712-432e-b0cf-72e74d53355f.png#clientId=u4e9c2c71-b6a7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=783&id=ud06e9ec5&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1174&originWidth=2240&originalType=binary&ratio=1&rotation=0&showTitle=false&size=181036&status=done&style=none&taskId=u7364a71b-4958-49b7-b2ae-f5c17c0d4df&title=&width=1493.3333333333333",alt:"image.png"})),(0,o.kt)("h2",{id:"\u540c\u6b65\u4efb\u52a1\u6d4b\u8bd5"},"\u540c\u6b65\u4efb\u52a1\u6d4b\u8bd5"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\u6ce8\u610f\u4e8b\u9879"),"\uff1a\n\u8868\u5fc5\u987b\u8981\u6709\u4e3b\u952e\uff0c\u5426\u5219\u540c\u6b65\u4efb\u52a1\u4f1a\u88ab\u6302\u8d77\n\u6e90\u7aef\u521b\u5efa\u5e93\u8868\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE zz;\nCREATE TABLE `t_user` (\n  `id` int(11) NOT NULL,\n  primary key (id)\n) ENGINE=INNODB;\n")),(0,o.kt)("p",null,"\u76ee\u6807\u7aef\u521b\u5efa\u8868\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE zz;\nCREATE TABLE `t_user` (\n  `id` int(11) NOT NULL,\n  primary key (id)\n) ENGINE=StoneDB;\n")),(0,o.kt)("p",null,"\u521b\u5efa\u8868\u540e\uff0c\u53c2\u8003",(0,o.kt)("a",{parentName:"p",href:"#jEeTl"},"otter \u90e8\u7f72")," \u914d\u7f6e\u597d\u540c\u6b65\u4efb\u52a1\uff0c\u7136\u540e\u521b\u5efa\u8868\u6210\u529f\u540e\u542f\u52a8\u540c\u6b65\u4efb\u52a1\n\u6e90\u7aef\u6267\u884c"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"# T1 \u521b\u5efat_user\u8868\u540e\u65e0\u6570\u636e\nmysql> select * from zz.t_user;\nEmpty set (0.00 sec)\n\n# T2 \u6267\u884c\u63d2\u5165\u6570\u636e\nmysql> insert into t_user values(1);\nQuery OK, 1 row affected (0.00 sec)\n\n# T3 \u518d\u6b21\u67e5\u8be2t_user\u8868\nmysql> select * from zz.t_user;\n+----+\n| id |\n+----+\n|  1 |\n+----+\n1 row in set (0.00 sec)\n\n")),(0,o.kt)("p",null,"\u76ee\u6807\u7aef\u6267\u884c"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"# T1 \u521b\u5efa\u67e5\u8be2t_user\u8868\u8868\u540e\u65e0\u6570\u636e\nmysql> select * from zz.t_user;\nEmpty set (0.00 sec)\n\n# T3 \u67e5\u8be2t_user\u8868\nmysql> select * from zz.t_user;\n+----+\n| id |\n+----+\n|  1 |\n+----+\n1 row in set (0.00 sec)\n\nmysql>\n\n")))}p.isMDXComponent=!0},58550:function(e,n,t){n.Z=t.p+"assets/images/otter_arc-317cb79db28564702d62a5b294b57346.jpg"}}]);
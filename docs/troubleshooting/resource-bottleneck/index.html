<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-troubleshooting/resource-bottleneck">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="alternate" type="application/rss+xml" href="/community/rss.xml" title="StoneDB RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/community/atom.xml" title="StoneDB Atom Feed">
<link rel="icon" href="/img/stoneDB.png">
<link rel="manifest" href="/manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/stoneDB.png">
<link rel="mask-icon" href="/img/stoneDB.png" color="rgb(62, 204, 94)">
<meta name="msapplication-TileImage" content="/img/stoneDB.png">
<meta name="msapplication-TileColor" content="#000"><title data-rh="true">Diagnose System Resource Bottlenecks | StoneDB</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://stonedb.io/docs/troubleshooting/resource-bottleneck"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Diagnose System Resource Bottlenecks | StoneDB"><meta data-rh="true" name="description" content="If an OS resource bottleneck occurs, applications running on the OS are affected and the OS may even fail to respond to simple instructions. Before the OS stops providing services, you can run commands to collect usage information about CPU, memory, I/O, and network resources and then analyze whether these resources are properly used and whether any resource bottlenecks exist."><meta data-rh="true" property="og:description" content="If an OS resource bottleneck occurs, applications running on the OS are affected and the OS may even fail to respond to simple instructions. Before the OS stops providing services, you can run commands to collect usage information about CPU, memory, I/O, and network resources and then analyze whether these resources are properly used and whether any resource bottlenecks exist."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://stonedb.io/docs/troubleshooting/resource-bottleneck"><link data-rh="true" rel="alternate" href="https://stonedb.io/docs/troubleshooting/resource-bottleneck" hreflang="en"><link data-rh="true" rel="alternate" href="https://stonedb.io/zh/docs/troubleshooting/resource-bottleneck" hreflang="zh"><link data-rh="true" rel="alternate" href="https://stonedb.io/docs/troubleshooting/resource-bottleneck" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.cee48ecd.css">
<link rel="preload" href="/assets/js/runtime~main.ca62d248.js" as="script">
<link rel="preload" href="/assets/js/main.356c5ca5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/logo_stonedb.svg" alt="StoneDB" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_stonedb.svg" alt="StoneDB" class="themedImage_ToTc themedImage--dark_i4oU"></div><span class="navbar__title text--truncate">Home</span></a><a class="navbar__item navbar__link" href="/docs/download">Download</a><a class="navbar__item navbar__link" href="/docs/about-stonedb/intro">Docs</a><a class="navbar__item navbar__link" href="/community/main">Community</a></div><div class="navbar__items navbar__items--right"><div class="ant-space ant-space-horizontal ant-space-align-center styles__GithubStyle-sc-gz8zhn-0 fMOuum hideInMobile"><div class="ant-space-item" style="margin-right:8px"></div><div class="ant-space-item"></div></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><span role="img" class="anticon undefined icon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false"><use xlink:href="#icon-a-bianzu9"></use></svg></span>English</a><ul class="dropdown__menu"><li><a href="/docs/troubleshooting/resource-bottleneck" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li><li><a href="/zh/docs/troubleshooting/resource-bottleneck" target="_self" rel="noopener noreferrer" class="dropdown__link">简体中文</a></li></ul></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" target="_self" href="/"><img src="/img/logo_stonedb.svg" alt="StoneDB" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_stonedb.svg" alt="StoneDB" class="themedImage_ToTc themedImage--dark_i4oU"><span>Home</span></a><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/about-stonedb/intro">About StoneDB</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/environment-requirements/supported-servers-and-OSs">Environment Requirements</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/getting-started/quick-deployment">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/O&amp;M-Guide/regular-change-operations">O&amp;M Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/compiling-methods">Developer Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/SQL-reference/character-sets">SQL Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/performance-tuning/performance-tuning-overview">Performance Tuning</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/data-migration-to-stonedb/use-outter-to-migrate">Data Migration to StoneDB</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/troubleshooting/failed-to-start">Troubleshooting</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/troubleshooting/failed-to-start">Failed to Start StoneDB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/troubleshooting/excessive-large-directory">Excessively Large Data Directory</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/troubleshooting/mdl-wait">Metadata Lock Waits</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/troubleshooting/stonedb-crashed">StoneDB Crashed</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/troubleshooting/failed-to-operate-table">Failed to Operate on Data in StoneDB Tables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/troubleshooting/failed-to-start-in-kvm">Failed to Start StoneDB in a KVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/troubleshooting/failed-to-connect">Failed to Connect to StoneDB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/troubleshooting/slow-query">Diagnose Slow SQL Queries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/troubleshooting/resource-bottleneck">Diagnose System Resource Bottlenecks</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/FAQ/install-faq">FAQ</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/release-notes">Release Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/download">Downloads</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Troubleshooting</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Diagnose System Resource Bottlenecks</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Diagnose System Resource Bottlenecks</h1><p>If an OS resource bottleneck occurs, applications running on the OS are affected and the OS may even fail to respond to simple instructions. Before the OS stops providing services, you can run commands to collect usage information about CPU, memory, I/O, and network resources and then analyze whether these resources are properly used and whether any resource bottlenecks exist.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cpu">CPU<a class="hash-link" href="#cpu" title="Direct link to heading">​</a></h2><p>The <code>top</code> and <code>vmstat</code> commands can be used to check the CPU utilization. The information returned by the <code>top</code> command is more comprehensive, which consists the statistics about the system performance and information about processes. The information returned is sorted by CPU utilization.</p><p>Example of <code>top </code>command output:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">top</span><span class="token plain"> - </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain">:12:21 up </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"> days, </span><span class="token number" style="color:rgb(247, 140, 108)">22</span><span class="token plain">:31,  </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> users,  load average: </span><span class="token number" style="color:rgb(247, 140, 108)">1.00</span><span class="token plain">, </span><span class="token number" style="color:rgb(247, 140, 108)">1.00</span><span class="token plain">, </span><span class="token number" style="color:rgb(247, 140, 108)">0.78</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Tasks: </span><span class="token number" style="color:rgb(247, 140, 108)">731</span><span class="token plain"> total,   </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> running, </span><span class="token number" style="color:rgb(247, 140, 108)">730</span><span class="token plain"> sleeping,   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> stopped,   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> zombie</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">%Cpu</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">:  </span><span class="token number" style="color:rgb(247, 140, 108)">1.7</span><span class="token plain"> us,  </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain"> sy,  </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain"> ni, </span><span class="token number" style="color:rgb(247, 140, 108)">98.3</span><span class="token plain"> id,  </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain"> wa,  </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain"> hi,  </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain"> si,  </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain"> st</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MiB Mem </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">257841.3</span><span class="token plain"> total,   </span><span class="token number" style="color:rgb(247, 140, 108)">1887.5</span><span class="token plain"> free,  </span><span class="token number" style="color:rgb(247, 140, 108)">45581.6</span><span class="token plain"> used, </span><span class="token number" style="color:rgb(247, 140, 108)">210372.2</span><span class="token plain"> buff/cache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MiB Swap:   </span><span class="token number" style="color:rgb(247, 140, 108)">8192.0</span><span class="token plain"> total,   </span><span class="token number" style="color:rgb(247, 140, 108)">8188.7</span><span class="token plain"> free,      </span><span class="token number" style="color:rgb(247, 140, 108)">3.3</span><span class="token plain"> used. </span><span class="token number" style="color:rgb(247, 140, 108)">210450.4</span><span class="token plain"> avail Mem </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PID </span><span class="token environment constant" style="color:rgb(130, 170, 255)">USER</span><span class="token plain">      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND                                                                                                                </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">908076</span><span class="token plain"> mysql     </span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">193</span><span class="token plain">.0g  </span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token plain">.4g  </span><span class="token number" style="color:rgb(247, 140, 108)">44088</span><span class="token plain"> S </span><span class="token number" style="color:rgb(247, 140, 108)">100.3</span><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">16.8</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">228</span><span class="token plain">:10.34 mysqld                                                                                                                 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">823137</span><span class="token plain"> root      </span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6187564</span><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">83772</span><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">51636</span><span class="token plain"> S   </span><span class="token number" style="color:rgb(247, 140, 108)">6.6</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token plain">:36.12 dockerd                                                                                                                </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">822938</span><span class="token plain"> root      </span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3278696</span><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">58500</span><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">35420</span><span class="token plain"> S   </span><span class="token number" style="color:rgb(247, 140, 108)">0.7</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">38</span><span class="token plain">:37.69 containerd                                                                                                             </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">1483</span><span class="token plain"> root      </span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">239280</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">9260</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">8136</span><span class="token plain"> S   </span><span class="token number" style="color:rgb(247, 140, 108)">0.3</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">:19.16 accounts-daemon                                                                                                        </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">928343</span><span class="token plain"> root      </span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">9936</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">4576</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">3240</span><span class="token plain"> R   </span><span class="token number" style="color:rgb(247, 140, 108)">0.3</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">:00.04 </span><span class="token function" style="color:rgb(130, 170, 255)">top</span><span class="token plain">                                                                                                                    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="parameter-description">Parameter description<a class="hash-link" href="#parameter-description" title="Direct link to heading">​</a></h3><p>Parameters in line 1:</p><table><thead><tr><th><strong>Parameter</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>10:12:21</td><td>The current system time.</td></tr><tr><td>up 5 days</td><td>The number of days for which the system runs continuously since last startup.</td></tr><tr><td>4 users</td><td>The number of the online users.</td></tr><tr><td>load average</td><td>The average system workloads in the past 1 minute, 5 minutes, and 15 minutes.</td></tr></tbody></table><p>Parameters in line 2:</p><table><thead><tr><th><strong>Parameter</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>total</td><td>The number of processes.</td></tr><tr><td>running</td><td>The number of processes that are in the running state.</td></tr><tr><td>sleeping</td><td>The number of processes that are in the sleeping state.</td></tr><tr><td>stopped</td><td>The number of processes that are in the stopped state.</td></tr><tr><td>zombie</td><td>The number of processes that are in the zombie state.</td></tr></tbody></table><p>Parameters in line 3:</p><table><thead><tr><th><strong>Parameter</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>us</td><td>The percentage of CPU time spent in running user space processes.</td></tr><tr><td>sy</td><td>The percentage of CPU time spent in running system processes.</td></tr><tr><td>ni</td><td>The percentage of CPU time spent in running the processes of which priorities are changed.</td></tr><tr><td>id</td><td>The percentage of CPU time spent idle.</td></tr><tr><td>wa</td><td>The percentage of CPU time spent in wait.</td></tr><tr><td>hi</td><td>The percentage of CPU time spent in handling hardware interrupts.</td></tr><tr><td>si</td><td>The percentage of CPU time spent in handling software interrups.</td></tr><tr><td>st</td><td>The percentage of CPU time spent on the hypervisor.</td></tr></tbody></table><p>Pay attention to values in line 3. If the value of <strong>us</strong> is large, user space processes consume much CPU time. If the value of <strong>us</strong> is larger than 50% for a long time, applications must be tuned in time. If the value of <strong>sy</strong> is large, system processes consume much CPU time. This may be caused by improper OS configuration or OS bugs. If the value of <strong>wa</strong> is large, I/O waits are high. This may be caused by high random I/O access or an I/O bottleneck.</p><p>Parameters in line 4:</p><table><thead><tr><th><strong>Parameter</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>total</td><td>The amount of memory.</td></tr><tr><td>free</td><td>The amount of free memory.</td></tr><tr><td>used</td><td>The amount of used memory.</td></tr><tr><td>buff/cache</td><td>The amount of memory that is used as buffers and cache.</td></tr></tbody></table><p>Parameters in line 5:</p><table><thead><tr><th><strong>Parameter</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>total</td><td>The size of swap space.</td></tr><tr><td>free</td><td>The size of free swap space.</td></tr><tr><td>used</td><td>The size of used swap space.</td></tr><tr><td>avail Mem</td><td>The size of swap space that has been cached.</td></tr></tbody></table><p>Parameters in the process list:</p><table><thead><tr><th><strong>Parameter</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>PID</td><td>The process ID.</td></tr><tr><td>USER</td><td>The owner of the process.</td></tr><tr><td>PR</td><td>The priority of the process. A smaller value indicates a higher priority.</td></tr><tr><td>NI</td><td>The nice value of the priority. A positive integer indicates that the priority of the process is being downgraded. A negative integer indicates that the priority of the process is being upgraded. The value range is -20 to 19 and the default value is 0.</td></tr><tr><td>VIRT</td><td>The amount of virtual memory occupied by the process.</td></tr><tr><td>RES</td><td>The amount of physical memory occupied by the process.</td></tr><tr><td>SHR</td><td>The amount of shared memory occupied by the process.</td></tr><tr><td>S</td><td>The status of the process. The value can be:<br>- <strong>S</strong>: sleeping<br>- <strong>R</strong>: running<br>- <strong>Z</strong>: zombie<br>- <strong>N</strong>: The nice value of the process is a negative value.<br></td></tr><tr><td>%CPU</td><td>The percentage of the CPU time used by the process.</td></tr><tr><td>%MEM</td><td>The percentage of the memory occupied by the process.</td></tr><tr><td>TIME+</td><td>The total CPU time used by the process.</td></tr><tr><td>COMMAND</td><td>The command that the process is running.</td></tr></tbody></table><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="diagnose-the-cause-of-high-cpu-utilization">Diagnose the cause of high CPU utilization<a class="hash-link" href="#diagnose-the-cause-of-high-cpu-utilization" title="Direct link to heading">​</a></h3><ol><li>Find the function that is called by the process that consumes the most CPU time.</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">top</span><span class="token plain"> -H</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">perf </span><span class="token function" style="color:rgb(130, 170, 255)">top</span><span class="token plain"> -p xxx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>xxx</em> indicates the process that consumes the most CPU time.</p><ol start="2"><li>Find the SQL statement that consumes the most CPU time.</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pidstat -t -p </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">mysqld_pid</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">select</span><span class="token plain"> * from performance_schema.threads where thread_os_id </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> xxx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain">G</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">select</span><span class="token plain"> * from information_schema.processlist where </span><span class="token function" style="color:rgb(130, 170, 255)">id</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> performance_schema.threads.processlist_id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain">G</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>xxx</em> indicates the thread that consumes the most CPU time.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="memory"><strong>Memory</strong><a class="hash-link" href="#memory" title="Direct link to heading">​</a></h2><p>The <code>top</code>, <code>vmstat</code>, and <code>free</code> commands can be used to monitor memory usage.</p><p>Example of <code>free</code> command output:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># free -g</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">total        used        </span><span class="token function" style="color:rgb(130, 170, 255)">free</span><span class="token plain">      shared  buff/cache   available</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Mem:            </span><span class="token number" style="color:rgb(247, 140, 108)">251</span><span class="token plain">          </span><span class="token number" style="color:rgb(247, 140, 108)">44</span><span class="token plain">           </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">           </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">         </span><span class="token number" style="color:rgb(247, 140, 108)">205</span><span class="token plain">         </span><span class="token number" style="color:rgb(247, 140, 108)">205</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Swap:             </span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token plain">           </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">           </span><span class="token number" style="color:rgb(247, 140, 108)">7</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="parameter-description-1">Parameter description<a class="hash-link" href="#parameter-description-1" title="Direct link to heading">​</a></h3><table><thead><tr><th><strong>Parameter</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>total</td><td>The amount of memory. <br><strong>total</strong> = <strong>used</strong> + <strong>free</strong> + <strong>buff/cache</strong></td></tr><tr><td>used</td><td>The amount of used memory.</td></tr><tr><td>free</td><td>The amount of free memory.</td></tr><tr><td>shared</td><td>The amount of shared memory.</td></tr><tr><td>buff/cache</td><td>The amount of memory used as buffers and cache.</td></tr><tr><td>available</td><td>The amount of available memory.<br><strong>available</strong> = <strong>free</strong> + <strong>buff/cache</strong></td></tr></tbody></table><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="diagnose-the-cause-of-high-memory-usage">Diagnose the cause of high memory usage<a class="hash-link" href="#diagnose-the-cause-of-high-memory-usage" title="Direct link to heading">​</a></h3><ol><li>Check whether memory is properly configured. For example, if the physical memory of the OS is 128 GB and 110 GB is allocated to the database instance, there is a high probability of memory exhaustion, because other OS processes and applications are consuming memory.</li><li>Check whether too many concurrent connections exist. <strong>read_buffer_size</strong>, <strong>read_rnd_buffer_size</strong>, <strong>sort_buffer_size</strong>, <strong>thread_stack</strong>, <strong>join_buffer_size</strong>, and <strong>binlog_cache_size</strong> are all session-level parameters. More connections indicate more memory consumed. Therefore, we recommend that you set these parameters to small values.</li><li>Check whether improper JOIN queries exist. Suppose a query that joins multiple tables exists, and the driving table of this query has a large result set. When the query is being executed, the driven table is executed for a large number of times, which may result in memory leakage.</li><li>Check whether too many files are open and whether <strong>table_open_cache</strong> is properly set. When you access a table, the table is loaded to the cache specified by <strong>table_open_cache</strong> so that next access to this table can be accelerated. However, if <strong>table_open_cache</strong> is too large and too many tables are open, a large amount of memory will be consumed.</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="io">I/O<a class="hash-link" href="#io" title="Direct link to heading">​</a></h2><p>The <code>iostat</code>, <code>dstat</code>, and <code>pidstat</code> commands are used to monitor the I/O usage.</p><p>Example of <code>iostat</code> command output:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># iostat -x 1 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Linux </span><span class="token number" style="color:rgb(247, 140, 108)">3.10</span><span class="token plain">.0-957.el7.x86_64 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">htap2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">     06/13/2022      _x86_64_        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">64</span><span class="token plain"> CPU</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">avg-cpu:  %user   %nice %system %iowait  %steal   %idle</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">0.06</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">0.00</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">0.03</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">0.01</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">0.00</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">99.90</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sda               </span><span class="token number" style="color:rgb(247, 140, 108)">0.00</span><span class="token plain">     </span><span class="token number" style="color:rgb(247, 140, 108)">0.00</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">0.00</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">0.00</span><span class="token plain">     </span><span class="token number" style="color:rgb(247, 140, 108)">0.04</span><span class="token plain">     </span><span class="token number" style="color:rgb(247, 140, 108)">0.00</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">85.75</span><span class="token plain">     </span><span class="token number" style="color:rgb(247, 140, 108)">0.00</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">0.25</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">0.25</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">0.00</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">0.15</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">0.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sdb               </span><span class="token number" style="color:rgb(247, 140, 108)">0.06</span><span class="token plain">     </span><span class="token number" style="color:rgb(247, 140, 108)">0.11</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">7.61</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">1.10</span><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">1849.41</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">50.81</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">436.48</span><span class="token plain">     </span><span class="token number" style="color:rgb(247, 140, 108)">0.36</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">40.93</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">46.75</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">0.48</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">1.56</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">1.35</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">dm-0              </span><span class="token number" style="color:rgb(247, 140, 108)">0.00</span><span class="token plain">     </span><span class="token number" style="color:rgb(247, 140, 108)">0.00</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">0.28</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">0.19</span><span class="token plain">     </span><span class="token number" style="color:rgb(247, 140, 108)">8.25</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">12.05</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">87.01</span><span class="token plain">     </span><span class="token number" style="color:rgb(247, 140, 108)">0.00</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">4.81</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">7.37</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">0.94</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">1.61</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">0.08</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="parameter-description-2">Parameter description<a class="hash-link" href="#parameter-description-2" title="Direct link to heading">​</a></h3><table><thead><tr><th><strong>Parameter</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>rrqm/s</td><td>The number of read requests merged per second.</td></tr><tr><td>wrqm/s</td><td>The number of write requests merged per second.</td></tr><tr><td>r/s</td><td>The number (after merges) of read requests completed per second.</td></tr><tr><td>w/s</td><td>The number (after merges) of write requests completed per second.</td></tr><tr><td>rkB/s</td><td>The number of kilobytes read per second.</td></tr><tr><td>wkB/s</td><td>The number of kilobytes written per second.</td></tr><tr><td>avgrq-sz</td><td>The average size of the requests, expressed in sectors (512 bytes).</td></tr><tr><td>avgqu-sz</td><td>The average queue length of the I/O requests.</td></tr><tr><td>await</td><td>The average time for I/O requests to be served.</td></tr><tr><td>r_await</td><td>The average time for read requests to be served.</td></tr><tr><td>w_await</td><td>The average time for write requests to be served.</td></tr><tr><td>svctm</td><td>The average service time for I/O requests.</td></tr><tr><td>%util</td><td>The percentage of CPU time spent on I/O requests.</td></tr></tbody></table><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The sum of <strong>r/s</strong> and <strong>w/s</strong> is the system input/output operations per second (IOPS).</p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="diagnose-the-cause-of-high-io-usage">Diagnose the cause of high I/O usage<a class="hash-link" href="#diagnose-the-cause-of-high-io-usage" title="Direct link to heading">​</a></h3><ol><li>Find the disk with the highest usage.</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">iostat -x -m </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">iostat -d /dev/sda -x -m </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Find the application with the highest I/O usage.</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pidstat -d </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Find the thread with the highest I/O usage.</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pidstat -dt -p mysqld_id </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>Find the SQL statement with the highest I/O usage.</li></ol><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">select</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> performance_schema</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">threads </span><span class="token keyword" style="font-style:italic">where</span><span class="token plain"> thread_os_id </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> xxx\G</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">select</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">processlist </span><span class="token keyword" style="font-style:italic">where</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> performance_schema</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">threads</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">processlist_id\G</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>xxx</em> indicates the thread with the highest I/O usage.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/stoneatom/stonedb/edit/stonedb-5.7/../Docs/08-troubleshooting/resource-bottleneck.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-07-28T03:22:58.000Z">7/28/2022</time></b> by <b>hustjieke</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/troubleshooting/slow-query"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Diagnose Slow SQL Queries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/FAQ/install-faq"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Installation FAQ</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#cpu" class="table-of-contents__link toc-highlight">CPU</a><ul><li><a href="#parameter-description" class="table-of-contents__link toc-highlight">Parameter description</a></li><li><a href="#diagnose-the-cause-of-high-cpu-utilization" class="table-of-contents__link toc-highlight">Diagnose the cause of high CPU utilization</a></li></ul></li><li><a href="#memory" class="table-of-contents__link toc-highlight"><strong>Memory</strong></a><ul><li><a href="#parameter-description-1" class="table-of-contents__link toc-highlight">Parameter description</a></li><li><a href="#diagnose-the-cause-of-high-memory-usage" class="table-of-contents__link toc-highlight">Diagnose the cause of high memory usage</a></li></ul></li><li><a href="#io" class="table-of-contents__link toc-highlight">I/O</a><ul><li><a href="#parameter-description-2" class="table-of-contents__link toc-highlight">Parameter description</a></li><li><a href="#diagnose-the-cause-of-high-io-usage" class="table-of-contents__link toc-highlight">Diagnose the cause of high I/O usage</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><div class="styles__LinkItemStyle-sc-1h1kjiy-0 hDEIGG"><a href="https://twitter.com/StoneDataBase" target="_blank" rel="noopener noreferrer" class="styles__Link-sc-1h1kjiy-1 jSEJvj"><span role="img" class="anticon undefined icon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false"><use xlink:href="#icon-a-bianzu2"></use></svg></span></a></div><span class="footer__link-separator">·</span><div class="styles__LinkItemStyle-sc-1h1kjiy-0 hDEIGG"><a class="styles__Link-sc-1h1kjiy-1 jSEJvj"><span role="img" class="anticon undefined icon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false"><use xlink:href="#icon-a-bianzu17beifen2"></use></svg></span></a></div><span class="footer__link-separator">·</span><div class="styles__LinkItemStyle-sc-1h1kjiy-0 hDEIGG"><a href="https://stonedb.slack.com/join/shared_invite/zt-1ba2lpvbo-Vqq62DJcxViyxCZmp7Rimw#/shared-invite/email" target="_blank" rel="noopener noreferrer" class="styles__Link-sc-1h1kjiy-1 jSEJvj"><span role="img" class="anticon undefined icon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false"><use xlink:href="#icon-a-bianzu18beifen2"></use></svg></span></a></div><span class="footer__link-separator">·</span><div class="styles__LinkItemStyle-sc-1h1kjiy-0 hDEIGG"><a href="https://github.com/StoneAtom/stonedb" target="_blank" rel="noopener noreferrer" class="styles__Link-sc-1h1kjiy-1 jSEJvj"><span role="img" class="anticon undefined icon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false"><use xlink:href="#icon-a-bianzu4"></use></svg></span></a></div></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © The StoneAtom-tech ALL Rights Reserved</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ca62d248.js"></script>
<script src="/assets/js/main.356c5ca5.js"></script>
</body>
</html>
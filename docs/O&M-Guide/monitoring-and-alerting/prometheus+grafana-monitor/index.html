<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-O&M-Guide/monitoring-and-alerting/prometheus+grafana-monitor">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="alternate" type="application/rss+xml" href="/community/rss.xml" title="StoneDB RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/community/atom.xml" title="StoneDB Atom Feed">
<link rel="icon" href="/img/stoneDB.png">
<link rel="manifest" href="/manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/stoneDB.png">
<link rel="mask-icon" href="/img/stoneDB.png" color="rgb(62, 204, 94)">
<meta name="msapplication-TileImage" content="/img/stoneDB.png">
<meta name="msapplication-TileColor" content="#000"><title data-rh="true">Use Prometheus and Grafana to Monitor MySQL or StoneDB Databases | StoneDB</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://stonedb.io/docs/O&amp;M-Guide/monitoring-and-alerting/prometheus+grafana-monitor"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Use Prometheus and Grafana to Monitor MySQL or StoneDB Databases | StoneDB"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://stonedb.io/docs/O&amp;M-Guide/monitoring-and-alerting/prometheus+grafana-monitor"><link data-rh="true" rel="alternate" href="https://stonedb.io/docs/O&amp;M-Guide/monitoring-and-alerting/prometheus+grafana-monitor" hreflang="en"><link data-rh="true" rel="alternate" href="https://stonedb.io/zh/docs/O&amp;M-Guide/monitoring-and-alerting/prometheus+grafana-monitor" hreflang="zh"><link data-rh="true" rel="alternate" href="https://stonedb.io/docs/O&amp;M-Guide/monitoring-and-alerting/prometheus+grafana-monitor" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.cee48ecd.css">
<link rel="preload" href="/assets/js/runtime~main.d734d817.js" as="script">
<link rel="preload" href="/assets/js/main.356c5ca5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/logo_stonedb.svg" alt="StoneDB" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_stonedb.svg" alt="StoneDB" class="themedImage_ToTc themedImage--dark_i4oU"></div><span class="navbar__title text--truncate">Home</span></a><a class="navbar__item navbar__link" href="/docs/download">Download</a><a class="navbar__item navbar__link" href="/docs/about-stonedb/intro">Docs</a><a class="navbar__item navbar__link" href="/community/main">Community</a></div><div class="navbar__items navbar__items--right"><div class="ant-space ant-space-horizontal ant-space-align-center styles__GithubStyle-sc-gz8zhn-0 fMOuum hideInMobile"><div class="ant-space-item" style="margin-right:8px"></div><div class="ant-space-item"></div></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><span role="img" class="anticon undefined icon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false"><use xlink:href="#icon-a-bianzu9"></use></svg></span>English</a><ul class="dropdown__menu"><li><a href="/docs/O&amp;M-Guide/monitoring-and-alerting/prometheus+grafana-monitor" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li><li><a href="/zh/docs/O&amp;M-Guide/monitoring-and-alerting/prometheus+grafana-monitor" target="_self" rel="noopener noreferrer" class="dropdown__link">简体中文</a></li></ul></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" target="_self" href="/"><img src="/img/logo_stonedb.svg" alt="StoneDB" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_stonedb.svg" alt="StoneDB" class="themedImage_ToTc themedImage--dark_i4oU"><span>Home</span></a><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/about-stonedb/intro">About StoneDB</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/environment-requirements/supported-servers-and-OSs">Environment Requirements</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/getting-started/quick-deployment">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/O&amp;M-Guide/regular-change-operations">O&amp;M Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/O&amp;M-Guide/regular-change-operations">Regular Change Operations</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/O&amp;M-Guide/monitoring-and-alerting/prometheus+grafana-monitor">Monitoring and Alerting</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/O&amp;M-Guide/monitoring-and-alerting/prometheus+grafana-monitor">Use Prometheus and Grafana to Monitor MySQL or StoneDB Databases</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/O&amp;M-Guide/backup-and-recovery/use-mysqldump-backup-and-restore">Backup and Recovery</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/compiling-methods">Developer Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/SQL-reference/character-sets">SQL Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/performance-tuning/performance-tuning-overview">Performance Tuning</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/data-migration-to-stonedb/use-outter-to-migrate">Data Migration to StoneDB</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/troubleshooting/failed-to-start">Troubleshooting</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/FAQ/install-faq">FAQ</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/release-notes">Release Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/download">Downloads</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">O&amp;M Guide</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Monitoring and Alerting</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Use Prometheus and Grafana to Monitor MySQL or StoneDB Databases</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Use Prometheus and Grafana to Monitor MySQL or StoneDB Databases</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="prometheus-introduction">Prometheus introduction<a class="hash-link" href="#prometheus-introduction" title="Direct link to heading">​</a></h3><p>Prometheus is an open-source systems monitoring and alerting toolkit originally built at SoundCloud. Since its inception in 2012, many companies and organizations have adopted Prometheus, and the project has a very active developer and user community. It is now a standalone open-source project and independently maintained by any company. To emphasize this, and to clarity the governance structure of the project, Prometheus joined the Cloud Native Computing Foundation in 2016 as the second hosted project, after Kubernetes.</p><p>For more information about Prometheus, visit <a href="https://prometheus.io/docs/introduction/overview/" target="_blank" class="styles__LinkStyle-sc-1kv35k6-0 igBeEE">https://prometheus.io/docs/introduction/overview/</a>.</p><p>To download Prometheus, visit <a href="https://prometheus.io/download/" target="_blank" class="styles__LinkStyle-sc-1kv35k6-0 igBeEE">https://prometheus.io/download/</a>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="grafana-introduction">Grafana introduction<a class="hash-link" href="#grafana-introduction" title="Direct link to heading">​</a></h3><p>Grafana is a suite of open-source visualization and analytics tools. It enables you to query, visualize, alert on, and explore your metrics, logs, and traces wherever they are stored, as well as share them to your teams. It is most commonly used to analyze and visualize time series data collected from infrastructure and applications.
For more information, visit <a href="https://grafana.com/docs/grafana/latest/introduction/" target="_blank" class="styles__LinkStyle-sc-1kv35k6-0 igBeEE">https://grafana.com/docs/grafana/latest/introduction/</a>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="environment-introduction">Environment introduction<a class="hash-link" href="#environment-introduction" title="Direct link to heading">​</a></h3><p>Machine A: on which Prometheus and Grafana are deployed in Docker containers</p><p>Machine B: on which mysqld_exporter and node_exporter are deployed</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="the-importance-of-mounting-data-and-configuration-files">The importance of mounting data and configuration files<a class="hash-link" href="#the-importance-of-mounting-data-and-configuration-files" title="Direct link to heading">​</a></h4><p>In the example of this topic, Prometheus and Grafana are deployed in Docker containers. If the data and configuration files are not mounted, they may be reset when Docker containers are restarted. Therefore, to prevent the loss of monitoring data, we strongly recommend that you mount the data and configuration files. Another benefit of doing this is that you can modify the configuration file directly on the physical machine and restart the Docker container to make the modification take effect.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-1-deploy-prometheus"><strong>Step 1. Deploy Prometheus</strong><a class="hash-link" href="#step-1-deploy-prometheus" title="Direct link to heading">​</a></h2><ol><li>On machine A, start Prometheus on a Docker container. Alternatively, download the TAR package from the official site of Prometheus, extract the <strong>data</strong> and <strong>prometheus.yml</strong> files from the package, and save each file to the specified directory, for example, save <strong>data</strong> to directory <strong>/home/prometheus/data</strong> and <strong>prometheus.yml</strong> to directory <strong>/home/prometheus/config</strong>.</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Start Prometheus which is not configured with file mounting and port mapping.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> run -d    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">prom/prometheus</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mkdir</span><span class="token plain"> -p /home/prometheus/data/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mkdir</span><span class="token plain"> -p /home/prometheus/config/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Copy the configuration and data files.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">ps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> 3fe0e3ea2aa5:/etc/prometheus/prometheus.yml /home/prometheus/config/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain">  3fe0e3ea2aa5:/prometheus /home/prometheus/data/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># You must be granted the permissions to operate on the &#x27;data&#x27; folder. Otherwise, mapping will fail due to insufficient permissions.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">chmod</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">777</span><span class="token plain"> /home/zsp/prometheus/data/*</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> /home/zsp/prometheus/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">tree</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│   └── prometheus.yml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└── data</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ├── chunks_head</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │   ├── 000001</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │   └── 000002</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ├── queries.active</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    └── wal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ├── 00000000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        └── 00000001</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Start another container and configure the directories to which the data and configuration files are mounted.</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> run -d  --restart</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">always --name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">prometheus  -p </span><span class="token number" style="color:rgb(247, 140, 108)">9090</span><span class="token plain">:9090  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-v /home/prometheus/config/prometheus.yml:/etc/prometheus/prometheus.yml  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-v /home/prometheus/data/:/prometheus/     prom/prometheus </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--config.file</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/etc/prometheus/prometheus.yml </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--storage.tsdb.path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/prometheus </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--web.enable-admin-api </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--web.enable-lifecycle </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--web.external-url</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;http://IP address of machine A:9090&#x27;</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--storage.tsdb.retention.time</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">30d</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If <code>&quot;http://&lt;IP address of machine A&gt;:9090&quot;</code> appears, Prometheus is successfully deployed. If the deployment fails, run the <code>docker logs &lt;Container ID&gt;</code> command to view logs and rectify the fault.
<img loading="lazy" alt="image.png" src="/assets/images/Prometheus-b3a844fcb06939b1f3fda1aede4a1aea.png"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-2-deploy-prometheus-exporter">Step 2. <strong>Deploy Prometheus Exporter</strong><a class="hash-link" href="#step-2-deploy-prometheus-exporter" title="Direct link to heading">​</a></h2><p>The following example shows how to monitor the OS and a MySQL database.</p><p>We recommend that you use the supervisord process to monitor Prometheus Exporter. For details about how to use supervisord, visit: <a href="https://www.jianshu.com/p/0b9054b33db3" target="_blank" class="styles__LinkStyle-sc-1kv35k6-0 igBeEE">https://www.jianshu.com/p/0b9054b33db3</a>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="deploy-node_exporter">Deploy node_exporter<a class="hash-link" href="#deploy-node_exporter" title="Direct link to heading">​</a></h3><ol><li>Download and decompress the installation package of node_exporter.</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">wget</span><span class="token plain"> https://github.com/prometheus/node_exporter/releases/download/v1.3.1/node_exporter-1.3.1.linux-amd64.tar.gz</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">tar</span><span class="token plain"> -zxvf node_exporter-1.3.1.linux-amd64.tar.gz</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mv</span><span class="token plain"> node_exporter-1.3.1.linux-amd64 node_exporter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mv</span><span class="token plain"> node_exporter /usr/local/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> /usr/local/node_exporter/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Start node_exporter to check whether it is successfully deployed.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./node_exporter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Start the interface again and check whether the port is open.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ss -nltp </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token function" style="color:rgb(130, 170, 255)">grep</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">9100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LISTEN     </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">      </span><span class="token number" style="color:rgb(247, 140, 108)">128</span><span class="token plain">         :::9100                    :::*                   users:</span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">((</span><span class="token variable" style="color:rgb(191, 199, 213)">&quot;node_exporter&quot;</span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token variable" style="color:rgb(191, 199, 213)">pid</span><span class="token variable operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable number" style="color:rgb(247, 140, 108)">17268</span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token variable" style="color:rgb(191, 199, 213)">fd</span><span class="token variable operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable number" style="color:rgb(247, 140, 108)">3</span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Use the supervisor to manage the node_exporter process.</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">vi</span><span class="token plain"> /etc/supervisord.d/node_exporter.ini</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">program:node_exporter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">directory </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> /usr/local/node_exporter/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">command</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> /usr/local/node_exporter/node_exporter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">autostart </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">startsecs </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">autorestart </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">startretries </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">user </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redirect_stderr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">stdout_logfile_maxbytes </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> 20MB</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">stdout_logfile_backups </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">stdout_logfile </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> /var/log/supervisor/node_exporter.log</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">systemctl restart supervisord</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="deploy-mysqld_exporter"><strong>Deploy mysqld_exporter</strong><a class="hash-link" href="#deploy-mysqld_exporter" title="Direct link to heading">​</a></h3><ol><li>Log in to the MySQL database on machine B and configure a MySQL monitoring account.</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">GRANT REPLICATION CLIENT, PROCESS ON </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"> TO </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;exporter&#x27;</span><span class="token plain">@</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;localhost&#x27;</span><span class="token plain"> identified by </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;exporter@123&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">GRANT SELECT ON performance_schema.* TO </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;exporter&#x27;</span><span class="token plain">@</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;localhost&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">flush privileges</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Download and decompress mysqld_exporter.</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">wget</span><span class="token plain"> https://github.com/prometheus/mysqld_exporter/releases/download/v0.14.0/mysqld_exporter-0.14.0.linux-amd64.tar.gz</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">tar</span><span class="token plain"> -zxvf mysqld_exporter-0.14.0.linux-amd64.tar.gz</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mv</span><span class="token plain"> mysqld_exporter-0.14.0.linux-amd64 mysqld_exporter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mv</span><span class="token plain"> mysqld_exporter /usr/local/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> /usr/local/mysqld_exporter/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Configure the monitoring account in the<strong> .my.cnf</strong> file to allow the account to log in to the configuration file.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">vi</span><span class="token plain"> .my.cnf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">user</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">exporter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">password</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">exporter@123</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>Start mysqld_exporter to monitor the database.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Test whether mysqld_exporter is working properly.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/usr/local/mysqld_exporter/mysqld_exporter --config.my-cnf</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/usr/local/mysqld_exporter/.my.cnf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ss -nltp </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token function" style="color:rgb(130, 170, 255)">grep</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">9104</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LISTEN     </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">      </span><span class="token number" style="color:rgb(247, 140, 108)">128</span><span class="token plain">         :::9104                    :::*                   users:</span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">((</span><span class="token variable" style="color:rgb(191, 199, 213)">&quot;mysqld_exporter&quot;</span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token variable" style="color:rgb(191, 199, 213)">pid</span><span class="token variable operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable number" style="color:rgb(247, 140, 108)">17266</span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token variable" style="color:rgb(191, 199, 213)">fd</span><span class="token variable operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable number" style="color:rgb(247, 140, 108)">3</span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="5"><li>Use Supervisor to manage the mysqld_exporter process.</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">cat</span><span class="token plain"> /etc/supervisord.d/mysqld_exporter.ini</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">program:mysqld_exporter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">directory </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> /usr/local/mysqld_exporter/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">command</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> /usr/local/mysqld_exporter/mysqld_exporter --config.my-cnf</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/usr/local/mysqld_exporter/.my.cnf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">autostart </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">startsecs </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">autorestart </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">startretries </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">user </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redirect_stderr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">stdout_logfile_maxbytes </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> 20MB</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">stdout_logfile_backups </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">stdout_logfile </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> /var/log/supervisor/mysqld_exporter.log</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">systemctl restart supervisord</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1><strong>Step 3. Configure Prometheus to monitor mysqld_exporter and node_exporter</strong></h1><ol><li>Complete the following configuration:</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># my global config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">global:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  scrape_interval: 15s </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Set the scrape interval to every 15 seconds. Default is every 1 minute.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  evaluation_interval: 15s </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Evaluate rules every 15 seconds. The default is every 1 minute.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># scrape_timeout is set to the global default (10s).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Alertmanager configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">alerting:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  alertmanagers:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - static_configs:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        - targets:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># - alertmanager:9093</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Load rules once and periodically evaluate them according to the global &#x27;evaluation_interval&#x27;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">rule_files:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># - &quot;first_rules.yml&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># - &quot;second_rules.yml&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># A scrape configuration containing exactly one endpoint to scrape:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Here it&#x27;s Prometheus itself.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">scrape_configs:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># The job name is added as a label `job=&lt;job_name&gt;` to any timeseries scraped from this config.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - job_name: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;prometheus&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># metrics_path defaults to &#x27;/metrics&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># scheme defaults to &#x27;http&#x27;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    static_configs:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - targets: </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;localhost:9090&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - job_name: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;node_exporter&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    static_configs:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - targets: </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;IP address of machine B:9100&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        labels:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          instance: IP address of machine B_stonedb</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - job_name: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;mysqld_exporter&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    static_configs:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - targets: </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;IP address of machine B:9104&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        labels:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          instance: IP address of machine B_stonedb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>After mysqld_exporter and node_exporter are added, restart the Docker container to load the configuration file.</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> restart 892d640f51b2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Wait a while and view<strong> State</strong> on the<strong> Targets</strong> page of Prometheus. If the value for every metric is <strong>up</strong>, performance data is collected.</li></ol><p><img loading="lazy" alt="image.png" src="/assets/images/Prometheus_Status_Targets-15b584fbf5a8b02fdce9dd573b46682a.png"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-4-deploy-grafana"><strong>Step 4. Deploy Grafana</strong><a class="hash-link" href="#step-4-deploy-grafana" title="Direct link to heading">​</a></h2><ol><li>Deploy Grafana in a Docker container.</li></ol><p>The method to deploy Grafana is the same as the method to deploy Prometheus. You also need to mount the data and configuration files. The command to deploy Grafana is similar to that used to deploy Prometheus.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> run -d --name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">grafana -p </span><span class="token number" style="color:rgb(247, 140, 108)">13000</span><span class="token plain">:3000 grafana/grafana</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> c2bfbdd0827f:/etc/grafana/grafana.ini /home/zsp/grafana/config/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> c2bfbdd0827f:/var/lib/grafana/ /home/zsp/grafana/data/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">tree</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│   └── grafana.ini</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└── data</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    └── grafana</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ├── alerting</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        │   └── </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        │       └── __default__.tmpl</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ├── csv</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ├── grafana.db</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ├── plugins</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        └── png</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Start Grafana.</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> run -d  --restart</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">always --name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">grafana  -p </span><span class="token number" style="color:rgb(247, 140, 108)">13000</span><span class="token plain">:3000  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-v /home/zsp/grafana/config/grafana.ini:/etc/grafana/grafana.ini  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-v /home/zsp/grafana/data/grafana/:/var/lib/grafana/    grafana/grafana</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Visit <code>http://&lt;IP address of machine A&gt;:13000</code> and log in to Grafana. The default username and password are <strong>admin</strong> and <strong>admin</strong>.</li></ol><p><img loading="lazy" alt="image.png" src="/assets/images/Grafana-852904716c1613128ede307c4a3480cc.png"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-5-configure-grafana-to-display-monitoring-data-from-prometheus"><strong>Step 5. Configure Grafana to display monitoring data from Prometheus</strong><a class="hash-link" href="#step-5-configure-grafana-to-display-monitoring-data-from-prometheus" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="configure-the-prometheus-data-source"><strong>Configure the Prometheus data source</strong><a class="hash-link" href="#configure-the-prometheus-data-source" title="Direct link to heading">​</a></h3><ol><li>Log in to Grafana. In the left-side navigation pane, choose <strong>Configuration</strong> &gt; <strong>Data sources</strong>.</li></ol><p><img loading="lazy" alt="image.png" src="/assets/images/Prometheus_data_source-8d1413d03ac23406bc8d294d02825beb.png"></p><ol start="2"><li>In the <strong>Time series databases</strong> area, click <strong>Prometheus</strong>.</li></ol><p><img loading="lazy" alt="image.png" src="/assets/images/Prometheus_add_data_source-633a200cab2d22224fb248bc1ea80a0e.png"></p><ol start="3"><li>Configure <strong>URL</strong> and <strong>Scrape Interval</strong>.</li></ol><p><img loading="lazy" alt="image.png" src="/assets/images/Prometheus_settings-e543d5e77bffb6756008a72d498298ca.png"></p><ol start="4"><li>Click <strong>Save &amp; test</strong>. If message &quot;Data source is working&quot; is displayed, the data source is configured.</li></ol><p><img loading="lazy" alt="image.png" src="/assets/images/Prometheus_save-c965fd60de0bd754a8d7b0c7ce8b62d8.png"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="configure-grafana-monitoring-dashboards"><strong>Configure Grafana Monitoring Dashboards</strong><a class="hash-link" href="#configure-grafana-monitoring-dashboards" title="Direct link to heading">​</a></h3><p>On the <strong>Configuration</strong> page, choose <strong>+</strong> &gt; <strong>Import</strong>, and import the official dashboards. You can customize dashboards based on your needs.
Link to obtaining official dashboards: <a href="https://grafana.com/grafana/dashboards/" target="_blank" class="styles__LinkStyle-sc-1kv35k6-0 igBeEE">https://grafana.com/grafana/dashboards/</a>
The following procedure shows how to configure dashboard 11074 to monitor node_exporter.</p><ol><li>In the left-side navigation pane, choose <strong>+</strong> &gt; <strong>Import</strong>. </li></ol><p><img loading="lazy" alt="image.png" src="/assets/images/Grafana_import1-4bd395b93278cb52e40af1f8f44d27dd.png"></p><ol start="2"><li>In the <strong>Import via Grafana.com</strong> text box, enter the dashboard ID and click<strong> Load</strong>.  In this example, the dashboard ID is 11074 which is a dashboard for monitoring OSs.</li></ol><p><img loading="lazy" alt="image.png" src="/assets/images/Grafana_import2-cddf105a844975cbe79a436d176f7ec5.png"></p><ol start="3"><li>In the <strong>VictoriaMetrics</strong> drop-down list, select <strong>Prometheus</strong>.</li></ol><p><img loading="lazy" alt="image.png" src="/assets/images/Grafana_import3-6b954db5d95cf525654442816143d349.png">
The procedure to configure the monitoring dashboard for a MySQL database is similar to the previous example. </p><p>Following are some example screenshots after the monitoring dashboard 1132 is configured.</p><p>Screenshot 1:
<img loading="lazy" alt="image.png" src="/assets/images/Mysql_setting1-c9a909d895ff73cac6e1ec1f28baf259.png">
Screenshot 2:
<img loading="lazy" alt="image.png" src="/assets/images/Mysql_setting2-31bb4c699f6aafe26fe8698f8fc2e827.png"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/stoneatom/stonedb/edit/stonedb-5.7/Docs/03-O&amp;M-Guide/00-monitoring-and-alerting/prometheus+grafana-monitor.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-08-15T04:01:53.000Z">8/15/2022</time></b> by <b>fuxiang</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/O&amp;M-Guide/regular-change-operations"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Regular Change Operations</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/O&amp;M-Guide/backup-and-recovery/use-mysqldump-backup-and-restore"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Use mysqldump to Back Up or Recover StoneDB</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a><ul><li><a href="#prometheus-introduction" class="table-of-contents__link toc-highlight">Prometheus introduction</a></li><li><a href="#grafana-introduction" class="table-of-contents__link toc-highlight">Grafana introduction</a></li><li><a href="#environment-introduction" class="table-of-contents__link toc-highlight">Environment introduction</a></li></ul></li><li><a href="#step-1-deploy-prometheus" class="table-of-contents__link toc-highlight"><strong>Step 1. Deploy Prometheus</strong></a></li><li><a href="#step-2-deploy-prometheus-exporter" class="table-of-contents__link toc-highlight">Step 2. <strong>Deploy Prometheus Exporter</strong></a><ul><li><a href="#deploy-node_exporter" class="table-of-contents__link toc-highlight">Deploy node_exporter</a></li><li><a href="#deploy-mysqld_exporter" class="table-of-contents__link toc-highlight"><strong>Deploy mysqld_exporter</strong></a></li></ul></li><li><a href="#step-4-deploy-grafana" class="table-of-contents__link toc-highlight"><strong>Step 4. Deploy Grafana</strong></a></li><li><a href="#step-5-configure-grafana-to-display-monitoring-data-from-prometheus" class="table-of-contents__link toc-highlight"><strong>Step 5. Configure Grafana to display monitoring data from Prometheus</strong></a><ul><li><a href="#configure-the-prometheus-data-source" class="table-of-contents__link toc-highlight"><strong>Configure the Prometheus data source</strong></a></li><li><a href="#configure-grafana-monitoring-dashboards" class="table-of-contents__link toc-highlight"><strong>Configure Grafana Monitoring Dashboards</strong></a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><div class="styles__LinkItemStyle-sc-1h1kjiy-0 hDEIGG"><a href="https://twitter.com/StoneDataBase" target="_blank" rel="noopener noreferrer" class="styles__Link-sc-1h1kjiy-1 jSEJvj"><span role="img" class="anticon undefined icon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false"><use xlink:href="#icon-a-bianzu2"></use></svg></span></a></div><span class="footer__link-separator">·</span><div class="styles__LinkItemStyle-sc-1h1kjiy-0 hDEIGG"><a class="styles__Link-sc-1h1kjiy-1 jSEJvj"><span role="img" class="anticon undefined icon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false"><use xlink:href="#icon-a-bianzu17beifen2"></use></svg></span></a></div><span class="footer__link-separator">·</span><div class="styles__LinkItemStyle-sc-1h1kjiy-0 hDEIGG"><a href="https://stonedb.slack.com/join/shared_invite/zt-1ba2lpvbo-Vqq62DJcxViyxCZmp7Rimw#/shared-invite/email" target="_blank" rel="noopener noreferrer" class="styles__Link-sc-1h1kjiy-1 jSEJvj"><span role="img" class="anticon undefined icon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false"><use xlink:href="#icon-a-bianzu18beifen2"></use></svg></span></a></div><span class="footer__link-separator">·</span><div class="styles__LinkItemStyle-sc-1h1kjiy-0 hDEIGG"><a href="https://github.com/StoneAtom/stonedb" target="_blank" rel="noopener noreferrer" class="styles__Link-sc-1h1kjiy-1 jSEJvj"><span role="img" class="anticon undefined icon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false"><use xlink:href="#icon-a-bianzu4"></use></svg></span></a></div></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © The StoneAtom-tech ALL Rights Reserved</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d734d817.js"></script>
<script src="/assets/js/main.356c5ca5.js"></script>
</body>
</html>